<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://example.com">
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.0cf68a.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/"></a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author"></h1>
			</hgroup>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-netfilter" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/09/11/netfilter/">netfilter</a>
    </h1>
  

        
        <a href="/2025/09/11/netfilter/" class="archive-article-date">
  	<time datetime="2025-09-10T17:17:01.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2025-09-11</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Netfilter"><a href="#Netfilter" class="headerlink" title="Netfilter"></a>Netfilter</h1><p><img src="/2025/09/11/netfilter/Netfilter-packet-flow.svg" alt="Netfilter-packet-flow"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">netfilter</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">iptables</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2025/09/11/netfilter/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-软件模拟虚拟无线WLAN接口" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/09/08/%E8%BD%AF%E4%BB%B6%E6%A8%A1%E6%8B%9F%E8%99%9A%E6%8B%9F%E6%97%A0%E7%BA%BFWLAN%E6%8E%A5%E5%8F%A3/">软件模拟虚拟无线WLAN接口</a>
    </h1>
  

        
        <a href="/2025/09/08/%E8%BD%AF%E4%BB%B6%E6%A8%A1%E6%8B%9F%E8%99%9A%E6%8B%9F%E6%97%A0%E7%BA%BFWLAN%E6%8E%A5%E5%8F%A3/" class="archive-article-date">
  	<time datetime="2025-09-08T15:14:00.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2025-09-08</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>由于虚拟机通常没有<strong>物理的无线网卡</strong>（Wi-Fi Adapter），我们无法创建真正的、可供手机或其他电脑连接的无线信号。但是，我们可以创建一个<strong>虚拟的无线接入点（Virtual AP）</strong>，它具备真实AP的所有软件功能，只是无线电信号是虚拟的。</p>
<p>我们将使用 Linux 内核模块 <code>mac80211_hwsim</code> 来模拟无线硬件。这个模块会创建两个（或更多）虚拟的无线网卡，它们之间可以通过空气（虚拟的）进行通信，非常适合在虚拟机中测试 hostapd、wpa_supplicant 等工具。</p>
<h4 id="第-1-步：更新系统并安装必要工具"><a href="#第-1-步：更新系统并安装必要工具" class="headerlink" title="第 1 步：更新系统并安装必要工具"></a>第 1 步：更新系统并安装必要工具</h4><p>打开终端，更新软件包列表并安装 <code>hostapd</code> 和 <code>dnsmasq</code>（用于提供 DHCP 和 DNS 服务）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install hostapd dnsmasq iw</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>hostapd</code>: 创建 AP 的主要软件。</p>
</li>
<li><p><code>dnsmasq</code>: 轻量级的 DHCP 和 DNS 服务器。</p>
</li>
<li><p><code>iw</code>: 用于管理和配置无线设备的工具。</p>
</li>
</ul>
<h4 id="第-2-步：加载虚拟无线驱动"><a href="#第-2-步：加载虚拟无线驱动" class="headerlink" title="第 2 步：加载虚拟无线驱动"></a>第 2 步：加载虚拟无线驱动</h4><p>Linux 内核自带了 <code>mac80211_hwsim</code> 模块。加载它来创建虚拟无线网卡。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> modprobe mac80211_hwsim</span><br></pre></td></tr></table></figure>

<p>默认情况下，这个命令会创建 <strong>两个</strong> 虚拟无线网卡（例如 <code>wlan0</code> 和 <code>wlan1</code>）。它们就像两台虚拟的电脑带着虚拟的无线网卡，并且可以彼此“听到”对方的信号。</p>
<p><strong>验证是否成功：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iw dev</span><br></pre></td></tr></table></figure>

<p>你应该能看到两个新的无线设备，名字通常是 <code>wlan0</code> 和 <code>wlan1</code>。你也可以使用 <code>ifconfig</code> 或 <code>ip a</code> 命令来查看。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">kkhm@vm:~$ iw dev</span><br><span class="line"><span class="meta prompt_">phy#</span><span class="language-bash">1</span></span><br><span class="line">        Unnamed/non-netdev interface</span><br><span class="line">                wdev 0x100000002</span><br><span class="line">                addr 42:00:00:00:01:00</span><br><span class="line">                type P2P-device</span><br><span class="line">                txpower 20.00 dBm</span><br><span class="line">        Interface wlan1</span><br><span class="line">                ifindex 5</span><br><span class="line">                wdev 0x100000001</span><br><span class="line">                addr 02:00:00:00:01:00</span><br><span class="line">                type managed</span><br><span class="line">                txpower 20.00 dBm</span><br><span class="line">                multicast TXQ:</span><br><span class="line">                        qsz-byt qsz-pkt flows   drops   marks   overlmt hashcol tx-bytes        tx-packets</span><br><span class="line">                        0       0       0       0       0       0       0       0               0</span><br><span class="line"><span class="meta prompt_">phy#</span><span class="language-bash">0</span></span><br><span class="line">        Interface wlan0</span><br><span class="line">                ifindex 4</span><br><span class="line">                wdev 0x1</span><br><span class="line">                addr 02:00:00:00:00:00</span><br><span class="line">                type managed</span><br><span class="line">                txpower 20.00 dBm</span><br><span class="line">                multicast TXQ:</span><br><span class="line">                        qsz-byt qsz-pkt flows   drops   marks   overlmt hashcol tx-bytes        tx-packets</span><br><span class="line">                        0       0       0       0       0       0       0       0               0</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">kkhm@vm:~$ ifconfig</span><br><span class="line">wlan0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 02:00:00:00:00:00  txqueuelen 1000  (以太网)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">wlan1: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 02:00:00:00:01:00  txqueuelen 1000  (以太网)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>



<p><strong>(可选) 指定创建网卡的数量：</strong></p>
<p>如果你想创建更多虚拟网卡（比如用于模拟多个客户端），可以使用 <code>radios</code> 参数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> modprobe mac80211_hwsim radios=3</span><br><span class="line"><span class="comment"># 这将创建 wlan0, wlan1, wlan2 三张虚拟网卡</span></span><br></pre></td></tr></table></figure>

<h4 id="第-3-步：配置-hostapd"><a href="#第-3-步：配置-hostapd" class="headerlink" title="第 3 步：配置 hostapd"></a>第 3 步：配置 hostapd</h4><p>我们需要创建一个配置文件来告诉 <code>hostapd</code> 如何设置我们的虚拟 AP。</p>
<ol>
<li><p>创建一个配置文件，例如 <code>virtual_ap.conf</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/hostapd/virtual_ap.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>将以下基本配置内容粘贴到文件中。这个配置创建一个开放（无密码）的网络，名为 <code>MyVirtualAP</code>。</p>
<p>ini</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 指定要使用的无线接口（使用刚才创建的其中一个，例如 wlan0）</span><br><span class="line">interface=wlan0</span><br><span class="line"></span><br><span class="line"># 设置驱动类型，对于 hwsim 使用 nl80211</span><br><span class="line">driver=nl80211</span><br><span class="line"></span><br><span class="line"># 设置网络名称 (SSID)</span><br><span class="line">ssid=MyVirtualAP</span><br><span class="line"></span><br><span class="line"># 设置工作频段 (2.4 GHz 或 5 GHz)</span><br><span class="line">hw_mode=g</span><br><span class="line">channel=6</span><br><span class="line"></span><br><span class="line"># 允许所有 MAC 地址连接</span><br><span class="line">macaddr_acl=0</span><br><span class="line"></span><br><span class="line"># 忽略广播 SSID 的请求，即总是广播</span><br><span class="line">ignore_broadcast_ssid=0</span><br><span class="line"></span><br><span class="line"># 启用 WPA2（如果需要加密网络，取消注释并修改以下行）</span><br><span class="line">#wpa=2</span><br><span class="line">#wpa_passphrase=MyStrongPassword</span><br><span class="line">#wpa_key_mgmt=WPA-PSK</span><br><span class="line">#rsn_pairwise=CCMP</span><br></pre></td></tr></table></figure>

<h4 id="第-4-步：配置网络和-DHCP（dnsmasq）"><a href="#第-4-步：配置网络和-DHCP（dnsmasq）" class="headerlink" title="第 4 步：配置网络和 DHCP（dnsmasq）"></a>第 4 步：配置网络和 DHCP（dnsmasq）</h4><p>现在我们需要为连接到 AP 的“客户端”分配 IP 地址。</p>
<ol>
<li><p><strong>首先，停止系统服务</strong>，防止冲突（我们手动运行它们）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl stop hostapd</span><br><span class="line"><span class="built_in">sudo</span> systemctl stop dnsmasq</span><br></pre></td></tr></table></figure>
</li>
<li><p>为虚拟 AP 接口（<code>wlan0</code>）配置一个静态 IP 地址：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ip addr add 192.168.100.1/24 dev wlan0</span><br><span class="line"><span class="built_in">sudo</span> ip <span class="built_in">link</span> <span class="built_in">set</span> wlan0 up</span><br></pre></td></tr></table></figure>

<p> 通过ifconfig可见wlan0获取到ip地址。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wlan0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.100.1  netmask 255.255.255.0  broadcast 0.0.0.0</span><br><span class="line">        ether 02:00:00:00:00:00  txqueuelen 1000  (以太网)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>


</li>
<li><p>创建一个简单的 <code>dnsmasq</code> 配置文件。为了避免修改主配置，我们可以直接通过命令行参数运行它：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以下命令会启动 dnsmasq，并只针对 wlan0 接口提供服务</span></span><br><span class="line"><span class="built_in">sudo</span> dnsmasq -i wlan0 --dhcp-range=192.168.100.50,192.168.100.150,255.255.255.0,24h</span><br><span class="line"><span class="comment"># 报错dnsmasq: failed to create listening socket for port 53: 地址已在使用</span></span><br><span class="line"><span class="comment"># sudo netstat -tulpn | grep :53可知一般53端口会被占用</span></span><br><span class="line"><span class="comment"># sudo dnsmasq -i wlan0 --dhcp-range=192.168.100.50,192.168.100.150,255.255.255.0,24h --port=0</span></span><br><span class="line"><span class="comment"># --port=0 参数告诉 dnsmasq 不绑定到 DNS 端口（53），只提供 DHCP 服务。</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>-i wlan0</code>: 指定监听的接口。</li>
<li><code>--dhcp-range</code>: 定义 DHCP 分配的 IP 地址范围。</li>
</ul>
</li>
</ol>
</li>
</ol>
<h4 id="第-5-步：启动-hostapd"><a href="#第-5-步：启动-hostapd" class="headerlink" title="第 5 步：启动 hostapd"></a>第 5 步：启动 hostapd</h4><p>现在是时候启动我们的虚拟 AP 了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 -dd 参数可以显示更详细的调试信息，方便排查问题</span></span><br><span class="line"><span class="built_in">sudo</span> hostapd -B /etc/hostapd/virtual_ap.conf</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-B</code>: 在后台运行。</li>
</ul>
<p>如果一切正常，终端会显示 <code>wlan0: AP-ENABLED</code> 之类的信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kkhm@vm:~$ sudo hostapd -B /etc/hostapd/virtual_ap.conf</span><br><span class="line">wlan0: interface state UNINITIALIZED-&gt;ENABLED</span><br><span class="line">wlan0: AP-ENABLED</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 多了一个						 RUNNING</span><br><span class="line">wlan0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.100.1  netmask 255.255.255.0  broadcast 0.0.0.0</span><br><span class="line">        ether 02:00:00:00:00:00  txqueuelen 1000  (以太网)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">kkhm@vm:~$ iw dev</span><br><span class="line">phy#1</span><br><span class="line">        Unnamed/non-netdev interface</span><br><span class="line">                wdev 0x100000002</span><br><span class="line">                addr 42:00:00:00:01:00</span><br><span class="line">                type P2P-device</span><br><span class="line">                txpower 20.00 dBm</span><br><span class="line">        Interface wlan1</span><br><span class="line">                ifindex 5</span><br><span class="line">                wdev 0x100000001</span><br><span class="line">                addr 02:00:00:00:01:00</span><br><span class="line">                type managed</span><br><span class="line">                txpower 20.00 dBm</span><br><span class="line">                multicast TXQ:</span><br><span class="line">                        qsz-byt qsz-pkt flows   drops   marks   overlmt hashcol tx-bytes        tx-packets</span><br><span class="line">                        0       0       0       0       0       0       0       0               0</span><br><span class="line">phy#0</span><br><span class="line">        Interface wlan0</span><br><span class="line">                ifindex 4</span><br><span class="line">                wdev 0x1</span><br><span class="line">                addr 02:00:00:00:00:00</span><br><span class="line">                ssid MyVirtualAP</span><br><span class="line">                type AP</span><br><span class="line">                channel 6 (2437 MHz), width: 20 MHz (no HT), center1: 2437 MHz</span><br><span class="line">                txpower 20.00 dBm</span><br><span class="line">                multicast TXQ:</span><br><span class="line">                        qsz-byt qsz-pkt flows   drops   marks   overlmt hashcol tx-bytes        tx-packets</span><br><span class="line">                        0       0       0       0       0       0       0       0               0</span><br></pre></td></tr></table></figure>



<h4 id="第-6-步：测试连接（使用另一个虚拟网卡）"><a href="#第-6-步：测试连接（使用另一个虚拟网卡）" class="headerlink" title="第 6 步：测试连接（使用另一个虚拟网卡）"></a>第 6 步：测试连接（使用另一个虚拟网卡）</h4><p>现在你的虚拟 AP <code>MyVirtualAP</code> 已经在 <code>wlan0</code> 上运行了。你可以使用另一个虚拟网卡（例如 <code>wlan1</code>）来模拟一个客户端并连接它。</p>
<ol>
<li><p><strong>查看可用的网络：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在另一个终端窗口执行</span></span><br><span class="line"><span class="built_in">sudo</span> iw dev wlan1 scan | grep <span class="string">&quot;SSID:&quot;</span></span><br></pre></td></tr></table></figure>

<p>你应该能看到 <code>SSID: MyVirtualAP</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">kkhm@vm:~$ <span class="built_in">sudo</span> iw dev wlan1 scan</span><br><span class="line">BSS 02:00:00:00:00:00(on wlan1)</span><br><span class="line">        last seen: 26350.725s [boottime]</span><br><span class="line">        TSF: 1757346205453486 usec (20339d, 15:43:25)</span><br><span class="line">        freq: 2437</span><br><span class="line">        beacon interval: 100 TUs</span><br><span class="line">        capability: ESS ShortSlotTime (0x0401)</span><br><span class="line">        signal: -30.00 dBm</span><br><span class="line">        last seen: 0 ms ago</span><br><span class="line">        Information elements from Probe Response frame:</span><br><span class="line">        SSID: MyVirtualAP</span><br><span class="line">        Supported rates: 1.0* 2.0* 5.5* 11.0* 6.0 9.0 12.0 18.0</span><br><span class="line">        DS Parameter <span class="built_in">set</span>: channel 6</span><br><span class="line">        ERP: Barker_Preamble_Mode</span><br><span class="line">        Extended supported rates: 24.0 36.0 48.0 54.0</span><br><span class="line">        Supported operating classes:</span><br><span class="line">                 * current operating class: 81</span><br><span class="line">        Extended capabilities:</span><br><span class="line">                 * Extended Channel Switching</span><br><span class="line">                 * Multiple BSSID</span><br><span class="line">                 * SSID List</span><br><span class="line">                 * Operating Mode Notification</span><br></pre></td></tr></table></figure>


</li>
<li><p><strong>连接到该网络：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先确保 wlan1 是启动的</span></span><br><span class="line"><span class="built_in">sudo</span> ip <span class="built_in">link</span> <span class="built_in">set</span> wlan1 up</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接到开放的 SSID</span></span><br><span class="line"><span class="built_in">sudo</span> iw dev wlan1 connect <span class="string">&quot;MyVirtualAP&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查是否成功连接，等几秒</span></span><br><span class="line">iw dev wlan1 <span class="built_in">link</span></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Connected to 02:00:00:00:00:00 (on wlan1)</span><br><span class="line">        SSID: MyVirtualAP</span><br><span class="line">        freq: 2437</span><br><span class="line">        RX: 104993 bytes (2298 packets)</span><br><span class="line">        TX: 2650 bytes (78 packets)</span><br><span class="line">        signal: -30 dBm</span><br><span class="line">        tx bitrate: 54.0 MBit/s</span><br><span class="line"></span><br><span class="line">        bss flags:      short-slot-time</span><br><span class="line">        dtim period:    2</span><br><span class="line">        beacon int:     100</span><br></pre></td></tr></table></figure>

<p> 此处可能因为管理冲突导致关联成功后取消认证</p>
<h4 id="禁止-NetworkManager-管理特定接口"><a href="#禁止-NetworkManager-管理特定接口" class="headerlink" title="禁止 NetworkManager 管理特定接口"></a>禁止 NetworkManager 管理特定接口</h4><p>如果您不想完全停止 NetworkManager，可以配置它不管理 wlan1：</p>
<p>bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 在 /etc/NetworkManager/NetworkManager.conf 的 [keyfile] 部分添加：</span><br><span class="line">sudo nano /etc/NetworkManager/NetworkManager.conf</span><br></pre></td></tr></table></figure>

<p>添加或修改：</p>
<p>ini</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[keyfile]</span><br><span class="line">unmanaged-devices=interface-name:wlan1</span><br></pre></td></tr></table></figure>

<p>然后重启 NetworkManager，WLAN1可能会停止需要重启：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart NetworkManager</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>从 DHCP 获取 IP 地址：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dhclient wlan1</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>验证连接：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip addr show wlan1</span><br><span class="line">ping 192.168.100.1 <span class="comment"># 尝试 Ping 通你的 AP</span></span><br></pre></td></tr></table></figure>

<p>如果 <code>wlan1</code> 获得了 <code>192.168.100.x</code> 网段的 IP 并能 ping 通 <code>192.168.100.1</code>，说明模拟完全成功！</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kkhm@vm:~$ ip addr show wlan1</span><br><span class="line">5: wlan1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span><br><span class="line">    link/ether 02:00:00:00:01:00 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.100.82/24 brd 192.168.100.255 scope global dynamic wlan1</span><br><span class="line">       valid_lft 86355sec preferred_lft 86355sec</span><br><span class="line">    inet6 fe80::ff:fe00:100/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure></li>
</ol>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">WLAN</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">iw</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">mac80211_hwsim</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2025/09/08/%E8%BD%AF%E4%BB%B6%E6%A8%A1%E6%8B%9F%E8%99%9A%E6%8B%9F%E6%97%A0%E7%BA%BFWLAN%E6%8E%A5%E5%8F%A3/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-hexo代码复制按钮" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/09/08/hexo%E4%BB%A3%E7%A0%81%E5%A4%8D%E5%88%B6%E6%8C%89%E9%92%AE/">hexo代码复制按钮</a>
    </h1>
  

        
        <a href="/2025/09/08/hexo%E4%BB%A3%E7%A0%81%E5%A4%8D%E5%88%B6%E6%8C%89%E9%92%AE/" class="archive-article-date">
  	<time datetime="2025-09-07T18:54:15.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2025-09-08</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-创建-JavaScript-脚本文件"><a href="#1-创建-JavaScript-脚本文件" class="headerlink" title="1. 创建 JavaScript 脚本文件"></a><strong>1. 创建 JavaScript 脚本文件</strong></h2><p>在 Hexo 博客项目的根目录下创建 JS 脚本文件 <code>code-copy.js</code> ,如果没有js文件夹则自己创建：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source/js/code-copy.js</span><br></pre></td></tr></table></figure>

<p>并填入以下完整内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;figure.highlight&#x27;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">figure</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (figure.<span class="title function_">querySelector</span>(<span class="string">&#x27;.copy-btn&#x27;</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> copyBtn = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">    copyBtn.<span class="property">className</span> = <span class="string">&#x27;copy-btn&#x27;</span>;</span><br><span class="line">    copyBtn.<span class="property">title</span> = <span class="string">&#x27;复制&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 缩小后的复制图标（14*15）</span></span><br><span class="line">    <span class="keyword">const</span> copyIcon = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;14&quot; width=&quot;15&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;white&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;path d=&quot;M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 18H8V7h11v16z&quot;/&gt;</span></span><br><span class="line"><span class="string">      &lt;/svg&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成功后显示的勾（14*15）</span></span><br><span class="line">    <span class="keyword">const</span> checkIcon = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;14&quot; width=&quot;15&quot; viewBox=&quot;0 0 24 24&quot; fill=&quot;#00cc66&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;path d=&quot;M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z&quot;/&gt;</span></span><br><span class="line"><span class="string">      &lt;/svg&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    copyBtn.<span class="property">innerHTML</span> = copyIcon;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 按钮样式（浅灰底、缩小）</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(copyBtn.<span class="property">style</span>, &#123;</span><br><span class="line">      <span class="attr">position</span>: <span class="string">&#x27;absolute&#x27;</span>,</span><br><span class="line">      <span class="attr">top</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">      <span class="attr">right</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">      <span class="attr">padding</span>: <span class="string">&#x27;4px&#x27;</span>,</span><br><span class="line">      <span class="attr">background</span>: <span class="string">&#x27;#aaa&#x27;</span>, </span><br><span class="line">      <span class="attr">border</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">      <span class="attr">borderRadius</span>: <span class="string">&#x27;4px&#x27;</span>,</span><br><span class="line">      <span class="attr">cursor</span>: <span class="string">&#x27;pointer&#x27;</span>,</span><br><span class="line">      <span class="attr">opacity</span>: <span class="string">&#x27;0.85&#x27;</span>,</span><br><span class="line">      <span class="attr">zIndex</span>: <span class="number">1000</span>,</span><br><span class="line">      <span class="attr">transition</span>: <span class="string">&#x27;opacity 0.2s ease&#x27;</span>,</span><br><span class="line">      <span class="attr">boxShadow</span>: <span class="string">&#x27;0 1px 3px rgba(0, 0, 0, 0.15)&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    copyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function">() =&gt;</span> copyBtn.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">    copyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">() =&gt;</span> copyBtn.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0.85&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    copyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> code = figure.<span class="title function_">querySelector</span>(<span class="string">&#x27;td.code&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> text = code ? code.<span class="property">innerText</span> : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(text).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        copyBtn.<span class="property">innerHTML</span> = checkIcon;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          copyBtn.<span class="property">innerHTML</span> = copyIcon;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    figure.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;relative&#x27;</span>;</span><br><span class="line">    figure.<span class="title function_">appendChild</span>(copyBtn);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-在页面底部引入-JS-文件"><a href="#2-在页面底部引入-JS-文件" class="headerlink" title="2. 在页面底部引入 JS 文件"></a><strong>2. 在页面底部引入 JS 文件</strong></h2><p>打开文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">themes/hexo-theme-Chic/layout/_partial/footer.ejs</span><br></pre></td></tr></table></figure>

<p>在 <code>&lt;/footer&gt;</code> 标签之后添加以下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;/js/code-copy.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>这样可以确保复制按钮脚本在页面加载完毕后自动运行。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2025/09/08/hexo%E4%BB%A3%E7%A0%81%E5%A4%8D%E5%88%B6%E6%8C%89%E9%92%AE/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-module" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="开题报告"><a href="#开题报告" class="headerlink" title="开题报告"></a>开题报告</h1><h2 id="1-课题背景"><a href="#1-课题背景" class="headerlink" title="1. 课题背景"></a>1. 课题背景</h2><p>无线接入点（Access Point，AP）是现代家庭、企业和数据中心网络的关键设备。常见的 AP 一般支持桥接模式（Bridge）和 NAT 模式（Network Address Translation），用户通过 SSID 进行无线接入。<br> 然而，传统 AP 的配置往往耦合在单一进程或脚本中，缺乏灵活性和可维护性。对于需要提供多个 SSID（如访客网络、隔离网络、NAT 网络）的场景，现有方案存在以下问题：</p>
<ul>
<li>配置与执行高度耦合，修改困难；</li>
<li>缺乏配置版本管理和回滚机制，错误配置容易导致服务中断；</li>
<li>用户配置入口复杂，不利于从 Web 界面直观操作。</li>
</ul>
<p>因此，本课题旨在设计并实现一个 <strong>支持多 SSID，支持桥接&#x2F;NAT 模式切换，支持 DHCP 服务和客户端隔离的无线 AP 系统</strong>，并提供可由 Web 界面驱动的配置与管理能力。</p>
<hr>
<h2 id="2-课题内容"><a href="#2-课题内容" class="headerlink" title="2. 课题内容"></a>2. 课题内容</h2><h3 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h3><p>本课题以 Linux 系统为运行平台，基于 <strong>hostapd、dnsmasq、iptables&#x2F;nftables</strong> 等成熟组件，设计一个解耦的配置管理与执行架构：</p>
<ul>
<li><strong>A 进程（配置管理）</strong>：接收并校验 Web 前端传递的 JSON 配置，完成持久化存储，并通过 socket 下发给 B 进程。</li>
<li><strong>B 进程（配置执行）</strong>：负责启动&#x2F;停止系统服务（hostapd、dnsmasq）、配置网络接口与防火墙规则，实现用户配置的执行与回滚。</li>
</ul>
<h3 id="2-2-模型组件"><a href="#2-2-模型组件" class="headerlink" title="2.2 模型组件"></a>2.2 模型组件</h3><p>系统主要组件包括：</p>
<ol>
<li><strong>Web 前端</strong>：提供用户操作界面（配置 SSID、频段、密码、模式、DHCP、隔离等）。</li>
<li><strong>A 进程（配置管理）</strong>：<ul>
<li>校验参数合法性（SSID 名称、信道范围、IP 地址等）；</li>
<li>保存配置到 Flash，具备版本管理能力；</li>
<li>通过 socket 将配置下发给 B 进程。</li>
</ul>
</li>
<li><strong>B 进程（配置执行）</strong>：<ul>
<li>管理 hostapd（无线 SSID 管理）；</li>
<li>管理 dnsmasq（DHCP 服务）；</li>
<li>配置 iptables&#x2F;nftables（NAT 转发）；</li>
<li>配置 Linux bridge（桥接模式）；</li>
<li>提供回滚能力，确保幂等执行。</li>
</ul>
</li>
<li><strong>系统服务</strong>：hostapd、dnsmasq、iptables、iproute2 等。</li>
</ol>
<h3 id="2-3-数据模型定义"><a href="#2-3-数据模型定义" class="headerlink" title="2.3 数据模型定义"></a>2.3 数据模型定义</h3><p>采用 JSON 作为配置传输格式。主要字段包括：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>示例值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td><code>&quot;ssid1&quot;</code></td>
<td>配置唯一标识</td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>&quot;Guest-NAT&quot;</code></td>
<td>SSID 名称</td>
</tr>
<tr>
<td><code>band</code></td>
<td><code>&quot;2.4G&quot;</code></td>
<td>工作频段（2.4G&#x2F;5G）</td>
</tr>
<tr>
<td><code>channel</code></td>
<td><code>6</code></td>
<td>信道号</td>
</tr>
<tr>
<td><code>password</code></td>
<td><code>&quot;guest1234&quot;</code></td>
<td>WPA2&#x2F;WPA3 密码</td>
</tr>
<tr>
<td><code>mode</code></td>
<td><code>&quot;nat&quot;</code> &#x2F; <code>&quot;bridge&quot;</code></td>
<td>工作模式</td>
</tr>
<tr>
<td><code>bridge_interface</code></td>
<td><code>&quot;br0&quot;</code></td>
<td>桥接时使用的网桥</td>
</tr>
<tr>
<td><code>client_isolation</code></td>
<td><code>true</code></td>
<td>是否启用客户端隔离</td>
</tr>
<tr>
<td><code>dhcp.enabled</code></td>
<td><code>true</code></td>
<td>是否启用 DHCP</td>
</tr>
<tr>
<td><code>dhcp.range_start</code></td>
<td><code>&quot;192.168.100.50&quot;</code></td>
<td>地址池起始 IP</td>
</tr>
<tr>
<td><code>dhcp.range_end</code></td>
<td><code>&quot;192.168.100.150&quot;</code></td>
<td>地址池结束 IP</td>
</tr>
<tr>
<td><code>dhcp.gateway</code></td>
<td><code>&quot;192.168.100.1&quot;</code></td>
<td>网关地址</td>
</tr>
</tbody></table>
<h3 id="2-4-实施流程"><a href="#2-4-实施流程" class="headerlink" title="2.4 实施流程"></a>2.4 实施流程</h3><h4 id="2-4-1-初始化配置"><a href="#2-4-1-初始化配置" class="headerlink" title="2.4.1 初始化配置"></a>2.4.1 初始化配置</h4><ul>
<li>Web 前端首次配置 → A 进程校验 → 保存 JSON 配置 → 下发 B 进程 → B 进程启动相应系统服务（hostapd&#x2F;dnsmasq&#x2F;iptables&#x2F;bridge）。</li>
</ul>
<h4 id="2-4-2-新建-SSID"><a href="#2-4-2-新建-SSID" class="headerlink" title="2.4.2 新建 SSID"></a>2.4.2 新建 SSID</h4><ul>
<li>用户在 Web 前端输入 SSID 配置（如新建 NAT 模式网络）。</li>
<li>A 进程保存配置并分配版本号 → 下发 B 进程。</li>
<li>B 进程启动新 VAP 接口、启用 DHCP 服务、配置 NAT 规则。</li>
</ul>
<h4 id="2-4-3-修改-SSID"><a href="#2-4-3-修改-SSID" class="headerlink" title="2.4.3 修改 SSID"></a>2.4.3 修改 SSID</h4><ul>
<li>修改参数（如信道或密码）。</li>
<li>A 进程检查配置合法性 → 保存新版本 → 通知 B 进程。</li>
<li>B 进程平滑重启相关服务，确保不中断其他 SSID。</li>
</ul>
<h4 id="2-4-5-成功-失败回滚"><a href="#2-4-5-成功-失败回滚" class="headerlink" title="2.4.5 成功&#x2F;失败回滚"></a>2.4.5 成功&#x2F;失败回滚</h4><ul>
<li>成功：A 进程将当前配置标记为 <code>last_good_version</code>。</li>
<li>失败：B 进程返回失败状态，A 进程回滚到 <code>last_good_version</code> 并下发恢复指令。</li>
</ul>
<hr>
<h2 id="3-课题要求"><a href="#3-课题要求" class="headerlink" title="3. 课题要求"></a>3. 课题要求</h2><ul>
<li>实现多 SSID 管理，支持桥接&#x2F;NAT 模式。</li>
<li>支持 DHCP 地址分配和客户端隔离。</li>
<li>Web 前端可完成配置下发和管理。</li>
<li>配置具备持久化和回滚能力。</li>
<li>系统具备可维护性和扩展性。</li>
</ul>
<hr>
<h2 id="4-研究思路和方法"><a href="#4-研究思路和方法" class="headerlink" title="4. 研究思路和方法"></a>4. 研究思路和方法</h2><h3 id="4-1-思路和方法"><a href="#4-1-思路和方法" class="headerlink" title="4.1 思路和方法"></a>4.1 思路和方法</h3><ul>
<li><strong>分层解耦</strong>：配置管理与配置执行分离，提升系统稳定性。</li>
<li><strong>配置即代码</strong>：采用 JSON 模型，保证配置可读可写，易扩展。</li>
<li><strong>幂等执行</strong>：B 进程操作具备幂等性，避免脏配置。</li>
<li><strong>版本化管理</strong>：支持回滚机制，保证服务持续可用。</li>
</ul>
<h3 id="4-3-方案设计"><a href="#4-3-方案设计" class="headerlink" title="4.3 方案设计"></a>4.3 方案设计</h3><ul>
<li>架构图、时序图、配置映射表，清晰展示控制面与执行面的关系。</li>
<li>利用成熟组件（hostapd、dnsmasq、iptables），降低开发风险。</li>
<li>自研部分主要是 A、B 进程的逻辑实现。</li>
</ul>
<hr>
<h2 id="5-重点难点"><a href="#5-重点难点" class="headerlink" title="5. 重点难点"></a>5. 重点难点</h2><h3 id="5-1-重点"><a href="#5-1-重点" class="headerlink" title="5.1 重点"></a>5.1 重点</h3><ul>
<li>JSON 配置模型与系统服务的映射关系。</li>
<li>A、B 进程之间的通信协议与版本管理。</li>
<li>多 SSID 并发管理，桥接与 NAT 模式切换。</li>
</ul>
<h3 id="5-2-难点"><a href="#5-2-难点" class="headerlink" title="5.2 难点"></a>5.2 难点</h3><ul>
<li>B 进程执行的幂等性和回滚机制设计。</li>
<li>hostapd&#x2F;dnsmasq 的多实例管理与配置动态更新。</li>
<li>NAT 与 bridge 模式共存时的防火墙规则管理。</li>
</ul>
<hr>
<h2 id="6-开展计划"><a href="#6-开展计划" class="headerlink" title="6. 开展计划"></a>6. 开展计划</h2><p>项目周期两个月（2025&#x2F;09&#x2F;02 – 2025&#x2F;11&#x2F;02），分为五个阶段：</p>
<ol>
<li><strong>需求分析与设计</strong>（09&#x2F;02 – 09&#x2F;10）<ul>
<li>明确配置需求、定义 JSON 数据模型、绘制架构图。</li>
</ul>
</li>
<li><strong>A 进程开发（配置管理）</strong>（09&#x2F;11 – 09&#x2F;20）<ul>
<li>实现 JSON 解析、参数校验、配置持久化、与 B 通信协议。</li>
</ul>
</li>
<li><strong>B 进程开发（配置执行）</strong>（09&#x2F;21 – 10&#x2F;05）<ul>
<li>实现系统服务调用、接口配置、NAT&#x2F;Bridge 切换、DHCP 管理。</li>
</ul>
</li>
<li><strong>集成与测试</strong>（10&#x2F;06 – 10&#x2F;20）<ul>
<li>Web → A → B → 系统服务全链路测试，多 SSID&#x2F;隔离验证。</li>
</ul>
</li>
<li><strong>优化与交付</strong>（10&#x2F;21 – 11&#x2F;02）<ul>
<li>代码优化、日志完善、编写最终报告、准备答辩 Demo。</li>
</ul>
</li>
</ol>
<h1 id="第-2-章-课题内容-简化版"><a href="#第-2-章-课题内容-简化版" class="headerlink" title="第 2 章 课题内容(简化版)"></a>第 2 章 课题内容(简化版)</h1><h3 id="2-1-概述-1"><a href="#2-1-概述-1" class="headerlink" title="2.1 概述"></a>2.1 概述</h3><p><strong>目标</strong><br> 设计并实现一个面向 Web 管理的 AP 配置与执行框架，核心能力包括：</p>
<ul>
<li>支持多 SSID（VAP）管理；</li>
<li>每个 SSID 支持两种工作模式：<strong>bridge</strong>（桥接） 与 <strong>nat</strong>（NAT）；</li>
<li>NAT 模式下支持独立子网、DHCP 地址池与基于 AP 出口的 SNAT；</li>
<li>支持客户端隔离（ap_isolate）；</li>
<li>提供配置持久化、版本管理与回滚；</li>
<li>A（配置管理）与 B（执行器）解耦。</li>
</ul>
<p><strong>约束</strong></p>
<ul>
<li>运行平台：嵌入式 Linux &#x2F; OpenWrt 类系统；</li>
<li>控制面轻量，不参与数据转发；</li>
<li>可观测性：完整日志、执行回执；</li>
<li>安全性：敏感数据保护，IPC&#x2F;配置文件权限控制。</li>
</ul>
<hr>
<h3 id="2-2-模型组件-1"><a href="#2-2-模型组件-1" class="headerlink" title="2.2 模型组件"></a>2.2 模型组件</h3><table>
<thead>
<tr>
<th>组件</th>
<th>职责</th>
<th>接口</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Web 前端</strong></td>
<td>提供配置页面（新增&#x2F;修改&#x2F;删除 SSID）</td>
<td>REST API (HTTP)、WebSocket</td>
<td>与用户交互</td>
</tr>
<tr>
<td><strong>A 进程</strong></td>
<td>接收 Web JSON、校验&#x2F;持久化&#x2F;下发、维护版本</td>
<td>REST、IPC、配置文件</td>
<td>逻辑中心</td>
</tr>
<tr>
<td><strong>B 进程</strong></td>
<td>读取配置并执行差异操作，调用系统命令</td>
<td>IPC、日志</td>
<td>幂等执行器</td>
</tr>
<tr>
<td><strong>系统服务</strong></td>
<td>hostapd&#x2F;dnsmasq&#x2F;iptables&#x2F;ip&#x2F;iw&#x2F;sysctl</td>
<td>系统命令接口</td>
<td>实际执行层</td>
</tr>
</tbody></table>
<hr>
<h3 id="2-3-数据模型定义-1"><a href="#2-3-数据模型定义-1" class="headerlink" title="2.3 数据模型定义"></a>2.3 数据模型定义</h3><h4 id="JSON-示例"><a href="#JSON-示例" class="headerlink" title="JSON 示例"></a>JSON 示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;version&quot;: 3,</span><br><span class="line">  &quot;ssids&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;id&quot;: &quot;guest_nat&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Guest-NAT&quot;,</span><br><span class="line">      &quot;band&quot;: &quot;2.4G&quot;,</span><br><span class="line">      &quot;channel&quot;: 6,</span><br><span class="line">      &quot;password&quot;: &quot;guest12345&quot;,</span><br><span class="line">      &quot;mode&quot;: &quot;nat&quot;,</span><br><span class="line">      &quot;client_isolation&quot;: true,</span><br><span class="line">      &quot;dhcp&quot;: &#123;</span><br><span class="line">        &quot;enabled&quot;: true,</span><br><span class="line">        &quot;gateway&quot;: &quot;192.168.100.1&quot;,</span><br><span class="line">        &quot;subnet_mask&quot;: &quot;255.255.255.0&quot;,</span><br><span class="line">        &quot;range_start&quot;: &quot;192.168.100.50&quot;,</span><br><span class="line">        &quot;range_end&quot;: &quot;192.168.100.150&quot;,</span><br><span class="line">        &quot;lease_time&quot;: &quot;12h&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;vif&quot;: &quot;wlan0_1&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;meta&quot;: &#123;</span><br><span class="line">    &quot;ap_name&quot;: &quot;MyAP&quot;,</span><br><span class="line">    &quot;updated_by&quot;: &quot;web_user&quot;,</span><br><span class="line">    &quot;timestamp&quot;: 1690000000</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="语义校验规则"><a href="#语义校验规则" class="headerlink" title="语义校验规则"></a>语义校验规则</h4><ul>
<li>SSID 名称唯一；</li>
<li>IP 地址池不重叠；</li>
<li>DHCP 网关在子网内且不落入池；</li>
<li>Bridge 模式下不启用 DHCP；</li>
<li>Channel 值根据 Band 合法。</li>
</ul>
<hr>
<h3 id="2-4-实施流程-1"><a href="#2-4-实施流程-1" class="headerlink" title="2.4 实施流程"></a>2.4 实施流程</h3><h4 id="2-4-1-初始化配置-1"><a href="#2-4-1-初始化配置-1" class="headerlink" title="2.4.1 初始化配置"></a>2.4.1 初始化配置</h4><ul>
<li>A 持久化配置 → 下发给 B；</li>
<li>B 创建 VAP、配置 IP、启动 dnsmasq、添加 NAT、启用转发；</li>
<li>成功后返回结果并记录为 <code>last_good_version</code>。</li>
</ul>
<p>示例命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iw dev wlan0 interface add wlan0_1 type __ap</span><br><span class="line">ip addr add 192.168.100.1/24 dev wlan0_1</span><br><span class="line">iptables -t nat -A POSTROUTING -s 192.168.100.0/24 -o eth0 -j MASQUERADE</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-新建-SSID-1"><a href="#2-4-2-新建-SSID-1" class="headerlink" title="2.4.2 新建 SSID"></a>2.4.2 新建 SSID</h4><ul>
<li>Web 提交新配置 → A 校验并生成新版本 → 下发给 B；</li>
<li>B 动态创建接口、写 dnsmasq 配置、添加 NAT 规则；</li>
<li>验证成功后写入运行态文件。</li>
</ul>
<h4 id="2-4-3-修改-SSID-1"><a href="#2-4-3-修改-SSID-1" class="headerlink" title="2.4.3 修改 SSID"></a>2.4.3 修改 SSID</h4><ul>
<li>修改密码：<code>hostapd_cli</code> 更新；</li>
<li>修改 channel：需重载 hostapd；</li>
<li>模式切换：bridge ⇄ nat，需要删除或新增 NAT&#x2F;DHCP 配置。</li>
</ul>
<h4 id="2-4-4-删除-SSID"><a href="#2-4-4-删除-SSID" class="headerlink" title="2.4.4 删除 SSID"></a>2.4.4 删除 SSID</h4><ul>
<li>移除 dnsmasq 配置；</li>
<li>删除 NAT 规则；</li>
<li>删除 VAP 接口。</li>
</ul>
<h4 id="2-4-5-成功-失败回滚-1"><a href="#2-4-5-成功-失败回滚-1" class="headerlink" title="2.4.5 成功&#x2F;失败回滚"></a>2.4.5 成功&#x2F;失败回滚</h4><ul>
<li>出错时 B 上报错误；</li>
<li>A 触发回滚，重新应用 <code>last_good_version</code>；</li>
<li>保证系统始终处于可用状态。</li>
</ul>
<hr>
<h1 id="📊-Mermaid-时序图"><a href="#📊-Mermaid-时序图" class="headerlink" title="📊 Mermaid 时序图"></a>📊 Mermaid 时序图</h1><p>下面这张图展示了“新建一个 NAT 模式的 SSID”的完整交互流程：</p>
<pre class="mermaid">sequenceDiagram
    participant Web as Web前端
    participant A as A进程<br>(配置管理)
    participant B as B进程<br>(配置执行)
    participant Sys as 系统服务<br>(hostapd/dnsmasq/iptables)

    Web->>A: 提交新增SSID JSON
    A->>A: 校验JSON Schema & 语义合法性
    A->>A: 持久化配置 (config_V.json)<br>更新current/last_good
    A->>B: IPC下发 {apply_config, version=V}
    B->>B: 读取配置 & 计算diff (create:ssid)
    B->>Sys: 创建VAP (iw/hostapd)
    B->>Sys: 配置接口IP (ip addr)
    B->>Sys: 写dnsmasq配置 & reload
    B->>Sys: 添加NAT规则 (iptables -t nat)
    Sys-->>B: 执行结果(成功/失败)
    B->>A: 返回apply_result(status=success)
    A->>Web: 返回成功 & 更新UI</pre>



<h1 id="第2章-课题内容（详尽版）"><a href="#第2章-课题内容（详尽版）" class="headerlink" title="第2章 课题内容（详尽版）"></a>第2章 课题内容（详尽版）</h1><h2 id="2-1-概述-2"><a href="#2-1-概述-2" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><p><strong>目标</strong><br> 设计并实现一个面向 Web 管理的 AP 配置与执行框架，核心能力包括：</p>
<ul>
<li>支持多 SSID（VAP）管理；</li>
<li>每个 SSID 支持两种工作模式：<strong>bridge</strong>（桥接） 与 <strong>nat</strong>（NAT）；</li>
<li>NAT 模式下支持独立子网、DHCP 地址池与基于 AP 出口的 SNAT；</li>
<li>支持客户端隔离（ap_isolate）；</li>
<li>提供配置持久化、版本管理与回滚（保证配置错误可恢复）；</li>
<li>A（配置管理）与 B（执行器）解耦：A 负责校验&#x2F;持久化&#x2F;下发，B 负责系统层执行与幂等性。</li>
</ul>
<p><strong>约束与非功能要求</strong></p>
<ul>
<li>运行平台：嵌入式 Linux（如 OpenWrt&#x2F;类似发行版）或通用 Linux；依赖 <code>hostapd</code>、<code>dnsmasq</code>、<code>iproute2</code>、<code>iptables/nftables</code>。</li>
<li>性能：控制面（A&#x2F;B）轻量，不参与数据转发；B 的系统调用应在线性时间内完成（以秒计）。</li>
<li>可观测性：完整日志、执行回执、Web 可查询状态。</li>
<li>安全性：敏感数据（密码）不得以明文散落日志；IPC、持久化文件权限要受限。</li>
</ul>
<hr>
<h2 id="2-2-模型组件（职责与接口）"><a href="#2-2-模型组件（职责与接口）" class="headerlink" title="2.2 模型组件（职责与接口）"></a>2.2 模型组件（职责与接口）</h2><h3 id="组件概览"><a href="#组件概览" class="headerlink" title="组件概览"></a>组件概览</h3><ul>
<li><strong>Web 前端</strong><ul>
<li>功能：向用户提供配置界面（SSID、频段、信道、密码、mode、client_isolation、DHCP 池等）；调用 A 的 HTTP API。</li>
<li>接口：<code>POST /api/config</code>、<code>GET /api/config</code>、<code>GET /api/status</code>、WebSocket&#x2F;Server-Sent Events 用于推送 apply 状态。</li>
</ul>
</li>
<li><strong>A 进程（配置管理）</strong><ul>
<li>职责：接收 Web JSON、进行 Schema 与语义校验（SSID 唯一、IP 子网不重叠、信道合法性等）、生成版本（version）、原子持久化到 flash（config_${version}.json）、维护 <code>current</code> 与 <code>last_good_version</code>、向 B 发送 IPC 下发请求、接收 B 执行结果并通知 Web。</li>
<li>接口：HTTP&#x2F;REST（供 Web 使用）、Unix Domain Socket（或其他本地 IPC）对 B 下发消息、文件路径 <code>/etc/myap/config_*.json</code>。</li>
</ul>
</li>
<li><strong>B 进程（配置执行）</strong><ul>
<li>职责：接收 A 的 apply 请求，读取对应 JSON，计算差异（diff：create&#x2F;modify&#x2F;delete），按序对系统层（hostapd&#x2F;dnsmasq&#x2F;ip&#x2F;iptables）执行操作，保证幂等且记录每一步执行结果；出错时上报并支持回滚（或请求 A 下发 last_good）。</li>
<li>接口：Unix Domain Socket（接收 apply）、日志文件 <code>/var/log/myap/b_process.log</code>、运行态文件 <code>/var/run/myap_running.json</code>。</li>
</ul>
</li>
<li><strong>系统服务（执行对象）</strong><ul>
<li><code>hostapd</code>：多 BSS 支持或驱动 VAP 管理。</li>
<li><code>dnsmasq</code>：DHCP 分配，建议使用 <code>--conf-dir</code> 按 ssid 生成小 conf 文件以便单独管理。</li>
<li><code>ip/iw</code>：接口创建、IP 分配、桥接。</li>
<li><code>iptables / nftables</code>：NAT 与 FORWARD 策略（建议在独立链管理）。</li>
<li><code>sysctl</code>：启用 <code>net.ipv4.ip_forward=1</code>（NAT 模式需要）。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="2-3-数据模型定义（JSON-Schema-字段校验）"><a href="#2-3-数据模型定义（JSON-Schema-字段校验）" class="headerlink" title="2.3 数据模型定义（JSON Schema + 字段校验）"></a>2.3 数据模型定义（JSON Schema + 字段校验）</h2><p>下面给出推荐的 JSON 示例与对应 JSON Schema（可用于 A 进程通过 JSON Schema 校验库实现自动校验）。</p>
<h3 id="推荐-JSON-示例"><a href="#推荐-JSON-示例" class="headerlink" title="推荐 JSON 示例"></a>推荐 JSON 示例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;version&quot;: 3,</span><br><span class="line">  &quot;ssids&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;id&quot;: &quot;guest_nat&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Guest-NAT&quot;,</span><br><span class="line">      &quot;band&quot;: &quot;2.4G&quot;,</span><br><span class="line">      &quot;channel&quot;: 6,</span><br><span class="line">      &quot;password&quot;: &quot;guest12345&quot;,</span><br><span class="line">      &quot;mode&quot;: &quot;nat&quot;,</span><br><span class="line">      &quot;client_isolation&quot;: true,</span><br><span class="line">      &quot;dhcp&quot;: &#123;</span><br><span class="line">        &quot;enabled&quot;: true,</span><br><span class="line">        &quot;gateway&quot;: &quot;192.168.100.1&quot;,</span><br><span class="line">        &quot;subnet_mask&quot;: &quot;255.255.255.0&quot;,</span><br><span class="line">        &quot;range_start&quot;: &quot;192.168.100.50&quot;,</span><br><span class="line">        &quot;range_end&quot;: &quot;192.168.100.150&quot;,</span><br><span class="line">        &quot;lease_time&quot;: &quot;12h&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;vif&quot;: &quot;wlan0_1&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;meta&quot;: &#123;</span><br><span class="line">    &quot;ap_name&quot;: &quot;MyAP&quot;,</span><br><span class="line">    &quot;updated_by&quot;: &quot;web_user&quot;,</span><br><span class="line">    &quot;timestamp&quot;: 1690000000</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="核心-JSON-Schema（示例，简化）"><a href="#核心-JSON-Schema（示例，简化）" class="headerlink" title="核心 JSON Schema（示例，简化）"></a>核心 JSON Schema（示例，简化）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,</span><br><span class="line">  &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">  &quot;required&quot;: [&quot;version&quot;,&quot;ssids&quot;],</span><br><span class="line">  &quot;properties&quot;: &#123;</span><br><span class="line">    &quot;version&quot;: &#123;&quot;type&quot;: &quot;integer&quot;, &quot;minimum&quot;: 1&#125;,</span><br><span class="line">    &quot;ssids&quot;: &#123;</span><br><span class="line">      &quot;type&quot;: &quot;array&quot;,</span><br><span class="line">      &quot;items&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">        &quot;required&quot;: [&quot;id&quot;,&quot;name&quot;,&quot;band&quot;,&quot;channel&quot;,&quot;mode&quot;,&quot;client_isolation&quot;,&quot;dhcp&quot;],</span><br><span class="line">        &quot;properties&quot;: &#123;</span><br><span class="line">          &quot;id&quot;: &#123;&quot;type&quot;:&quot;string&quot;,&quot;pattern&quot;:&quot;^[A-Za-z0-9_\\-]&#123;1,32&#125;$&quot;&#125;,</span><br><span class="line">          &quot;name&quot;: &#123;&quot;type&quot;:&quot;string&quot;,&quot;minLength&quot;:1,&quot;maxLength&quot;:32&#125;,</span><br><span class="line">          &quot;band&quot;: &#123;&quot;type&quot;:&quot;string&quot;,&quot;enum&quot;:[&quot;2.4G&quot;,&quot;5G&quot;]&#125;,</span><br><span class="line">          &quot;channel&quot;: &#123;&quot;type&quot;:&quot;integer&quot;,&quot;minimum&quot;:1,&quot;maximum&quot;:165&#125;,</span><br><span class="line">          &quot;password&quot;: &#123;&quot;type&quot;:[&quot;string&quot;,&quot;null&quot;], &quot;minLength&quot;:8&#125;,</span><br><span class="line">          &quot;mode&quot;: &#123;&quot;type&quot;:&quot;string&quot;,&quot;enum&quot;:[&quot;bridge&quot;,&quot;nat&quot;]&#125;,</span><br><span class="line">          &quot;client_isolation&quot;: &#123;&quot;type&quot;:&quot;boolean&quot;&#125;,</span><br><span class="line">          &quot;vif&quot;: &#123;&quot;type&quot;:&quot;string&quot;&#125;,</span><br><span class="line">          &quot;dhcp&quot;: &#123;</span><br><span class="line">            &quot;type&quot;:&quot;object&quot;,</span><br><span class="line">            &quot;required&quot;:[&quot;enabled&quot;],</span><br><span class="line">            &quot;properties&quot;:&#123;</span><br><span class="line">              &quot;enabled&quot;:&#123;&quot;type&quot;:&quot;boolean&quot;&#125;,</span><br><span class="line">              &quot;gateway&quot;:&#123;&quot;type&quot;:&quot;string&quot;,&quot;format&quot;:&quot;ipv4&quot;&#125;,</span><br><span class="line">              &quot;subnet_mask&quot;:&#123;&quot;type&quot;:&quot;string&quot;&#125;,</span><br><span class="line">              &quot;range_start&quot;:&#123;&quot;type&quot;:&quot;string&quot;,&quot;format&quot;:&quot;ipv4&quot;&#125;,</span><br><span class="line">              &quot;range_end&quot;:&#123;&quot;type&quot;:&quot;string&quot;,&quot;format&quot;:&quot;ipv4&quot;&#125;,</span><br><span class="line">              &quot;lease_time&quot;:&#123;&quot;type&quot;:&quot;string&quot;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;meta&quot;: &#123;&quot;type&quot;:&quot;object&quot;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="额外语义校验（由-A-进程实现）"><a href="#额外语义校验（由-A-进程实现）" class="headerlink" title="额外语义校验（由 A 进程实现）"></a>额外语义校验（由 A 进程实现）</h3><ul>
<li><code>ssid.name</code> 不与已存在 SSID 冲突（case-insensitive）；</li>
<li><code>channel</code> 根据 <code>band</code> 做范围检查，(2.4G 通常 1–14，5G 常见 36–165，受国家&#x2F;驱动限制)；</li>
<li><code>dhcp.range_start/ end</code> 必须在同一子网，且与其他 SSID 的地址池<strong>不重叠</strong>；</li>
<li><code>dhcp.gateway</code> 必须在同一子网且不在 DHCP 池内；</li>
<li>若 <code>mode=bridge</code> 则 <code>dhcp.enabled</code> 通常应为 <code>false</code>（允许但需警示）；</li>
<li><code>vif</code> 若手动指定，A 需检查命名不冲突且驱动支持；否则由 B 自动分配 <code>wlan0_&lt;n&gt;</code>。</li>
</ul>
<hr>
<h2 id="2-4-实施流程（操作序列、命令示例、回滚策略）"><a href="#2-4-实施流程（操作序列、命令示例、回滚策略）" class="headerlink" title="2.4 实施流程（操作序列、命令示例、回滚策略）"></a>2.4 实施流程（操作序列、命令示例、回滚策略）</h2><blockquote>
<p>说明：下面按常见场景给出详细执行步骤与命令示例。B 进程应执行“存在性检查 → 操作 → 验证”三段式，任何步骤失败要记录并上报 A。</p>
</blockquote>
<h3 id="通用准备（A、B-协议与持久化）"><a href="#通用准备（A、B-协议与持久化）" class="headerlink" title="通用准备（A、B 协议与持久化）"></a>通用准备（A、B 协议与持久化）</h3><ol>
<li><strong>持久化策略（A）</strong><ul>
<li>写入临时文件 <code>/tmp/config_$&#123;version&#125;.json.tmp</code> → <code>fsync()</code> → <code>rename</code> 到 <code>/etc/myap/config_$&#123;version&#125;.json</code>（保证原子性）。</li>
<li>更新 <code>/etc/myap/current</code>（软链接或文件指向）并 <code>fsync</code>。</li>
<li><code>last_good_version</code> 保存到 <code>/etc/myap/last_good</code>。</li>
</ul>
</li>
<li><strong>IPC 格式</strong><ul>
<li>A → B: <code>&#123;action:&quot;apply_config&quot;, version: N, config_path: &quot;/etc/myap/config_N.json&quot;, delta: &#123;...&#125;&#125;</code></li>
<li>B → A: <code>&#123;action:&quot;apply_result&quot;, version: N, status:&quot;success&quot;|&quot;partial_fail&quot;|&quot;fail&quot;, errors:[...], applied_steps:[...]&#125;</code></li>
</ul>
</li>
<li><strong>互斥锁</strong><ul>
<li>A 在下发前获取&#x2F;检查全局文件锁（<code>flock</code>），B 在执行开始时获取同一锁，避免并发 apply。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="2-4-1-初始化配置（系统第一次上电-部署）"><a href="#2-4-1-初始化配置（系统第一次上电-部署）" class="headerlink" title="2.4.1 初始化配置（系统第一次上电&#x2F;部署）"></a>2.4.1 初始化配置（系统第一次上电&#x2F;部署）</h3><p><strong>目标</strong>：将初始配置加载到系统并启动必要服务。</p>
<p><strong>步骤：</strong></p>
<ol>
<li><p>Web 提交初始 JSON → A 校验。</p>
</li>
<li><p>A 原子写入 <code>/etc/myap/config_1.json</code>，设置 <code>current=1</code>。</p>
</li>
<li><p>A 发 IPC <code>&#123;action:apply_config,version:1,path:/etc/myap/config_1.json&#125;</code> 给 B。</p>
</li>
<li><p>B 读取 JSON，计算 diff（空→目标）。</p>
</li>
<li><p>B 按 SSID 顺序执行：</p>
<ul>
<li><p>创建&#x2F;启用 VAP（示例）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 如果使用 iw 动态创建</span><br><span class="line">iw dev wlan0 interface add wlan0_1 type __ap</span><br><span class="line">ip link set wlan0_1 up</span><br><span class="line"># 或通过 hostapd bss 段再 hostapd_cli reconfigure</span><br></pre></td></tr></table></figure>
</li>
<li><p>给接口配置 IP（NAT 模式）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr add 192.168.100.1/24 dev wlan0_1</span><br></pre></td></tr></table></figure>
</li>
<li><p>生成 <code>/etc/dnsmasq.d/ssid_guest_nat.conf</code>，内容示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface=wlan0_1</span><br><span class="line">dhcp-range=192.168.100.50,192.168.100.150,12h</span><br><span class="line">dhcp-option=3,192.168.100.1</span><br></pre></td></tr></table></figure>

<p>然后 <code>kill -HUP $(pidof dnsmasq)</code> 或 <code>systemctl reload dnsmasq</code>。</p>
</li>
<li><p>添加 NAT 规则（带 comment）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -C POSTROUTING -s 192.168.100.0/24 -o eth0 -j MASQUERADE \</span><br><span class="line">  || iptables -t nat -A POSTROUTING -s 192.168.100.0/24 -o eth0 -j MASQUERADE -m comment --comment &quot;ssid:guest_nat&quot;</span><br><span class="line">sysctl -w net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>B 在所有 SSID 执行成功后写运行态 <code>/var/run/myap_running.json</code> 并返回 success 给 A。</p>
</li>
<li><p>A 将 <code>last_good_version=1</code> 并向 Web 推送 apply_done。</p>
</li>
</ol>
<p><strong>错误处理</strong>：若在任一步骤失败，B 应记录 <code>applied_steps</code> 并上报 error，A 可请求 B 逆序清理或直接下发 <code>last_good_version</code>（初始无 last_good 则进入故障提示）。</p>
<hr>
<h3 id="2-4-2-新建-SSID（增）"><a href="#2-4-2-新建-SSID（增）" class="headerlink" title="2.4.2 新建 SSID（增）"></a>2.4.2 新建 SSID（增）</h3><p><strong>场景</strong>：已有系统运行，用户新增一个 NAT SSID。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>Web 提交新 SSID JSON → A 校验（包括 IP 池冲突检查）。</li>
<li>A 写新版本 config_{V}.json，更新 current，send apply request（delta 标记 create:ssid_id）。</li>
<li>B 读取 diff，针对 create：<ul>
<li>检查 <code>vif</code>（若由 B 分配则选择未使用的 <code>wlan0_&lt;n&gt;</code>）。</li>
<li>创建 VAP（<code>iw dev</code> 或 hostapd bss）并 <code>ip link set up</code>。</li>
<li>配置接口 IP（<code>ip addr add</code>）。</li>
<li>写 dnsmasq per-ssid conf 并 reload。</li>
<li>添加 NAT 规则（先 check 再 add）。</li>
</ul>
</li>
<li>验证：Ping gateway、检查 DHCP 是否分配（可模拟 client）等。</li>
<li>B 返回 apply_result；若 success，A 更新 last_good_version&#x3D;V。</li>
</ol>
<p><strong>关键幂等点</strong>：每条 iptables 规则加入前做存在性检查；每次写 conf 用临时文件 rename。</p>
<hr>
<h3 id="2-4-3-修改-SSID（改：频道-密码-mode-等）"><a href="#2-4-3-修改-SSID（改：频道-密码-mode-等）" class="headerlink" title="2.4.3 修改 SSID（改：频道&#x2F;密码&#x2F;mode 等）"></a>2.4.3 修改 SSID（改：频道&#x2F;密码&#x2F;mode 等）</h3><p><strong>场景</strong>：用户修改 SSID 的 channel、password 或从 bridge 切换到 nat。</p>
<p><strong>步骤（通用）</strong>：</p>
<ol>
<li>A 校验变更是否合法（如信道变更需检查是否被允许&#x2F;DFS 约束）。</li>
<li>A 写版本并下发（delta: modify:[ssid_id]）。</li>
<li>B 计算修改的最小变更集并按顺序平滑应用：<ul>
<li><strong>修改 password&#x2F; ap_isolate</strong>：优先通过 <code>hostapd_cli</code> 修改或重载 BSS，不重启整个 hostapd（若支持）。示例：<code>hostapd_cli -i wlan0_1 set wpa_passphrase newpass</code>（视 hostapd 支持）。</li>
<li><strong>修改 channel&#x2F;band</strong>：通常需要重载 hostapd，B 应先提醒短中断并在低流量时重载。</li>
<li><strong>mode 切换（bridge→nat 或 nat→bridge）</strong>：<ul>
<li>切换到 NAT：创建子网 IP、启动 dhcp conf、添加 NAT 规则、设置 ip_forward。</li>
<li>切换到 bridge：先移除 NAT 规则、停止 dhcp per-ssid、把 vif 加入 br0（<code>ip link set wlan0_1 master br0</code>）。</li>
</ul>
</li>
</ul>
</li>
<li>验证每步后再继续后续动作。</li>
<li>成功则 A 更新 last_good_version；若失败按回滚策略恢复。</li>
</ol>
<p><strong>注意</strong>：对可能造成中断的操作（channel、hostapd 重载）在 Web 端需显示“可能短中断”提示以便用户知情。</p>
<hr>
<h3 id="2-4-4-删除-SSID（删）"><a href="#2-4-4-删除-SSID（删）" class="headerlink" title="2.4.4 删除 SSID（删）"></a>2.4.4 删除 SSID（删）</h3><p><strong>步骤</strong>：</p>
<ol>
<li><p>A 接收删除请求并写新版本（delta: delete:[ssid]）。</p>
</li>
<li><p>B 执行删除：</p>
<ul>
<li><p>停止并删除 dnsmasq per-ssid 配置（删除 <code>/etc/dnsmasq.d/ssid_&lt;id&gt;.conf</code> 并 reload）。</p>
</li>
<li><p>删除 iptables 对应规则（匹配 comment 或源网段），例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -D POSTROUTING -s 192.168.100.0/24 -o eth0 -j MASQUERADE -m comment --comment &quot;ssid:guest_nat&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>从 br0 移除接口或 <code>ip link set wlan0_1 down; iw dev wlan0_1 del</code>。</p>
</li>
<li><p>清理 residual files（lease 文件、日志、运行态条目）。</p>
</li>
</ul>
</li>
<li><p>验证：确保无对应规则或 conf 文件残留。</p>
</li>
<li><p>B 返回 apply_result，A 更新 last_good_version。</p>
</li>
</ol>
<hr>
<h3 id="2-4-5-成功-失败回滚策略"><a href="#2-4-5-成功-失败回滚策略" class="headerlink" title="2.4.5 成功 &#x2F; 失败回滚策略"></a>2.4.5 成功 &#x2F; 失败回滚策略</h3><p><strong>推荐策略（B 失败时）</strong>：以 <strong>恢复 last_good_version</strong> 为主（由 A 触发）。</p>
<p><strong>流程</strong>：</p>
<ol>
<li>B 在执行过程中若遇到不可恢复错误，返回 partial_fail&#x2F; fail 给 A 并附带 <code>applied_steps</code> 与 <code>errors</code>。</li>
<li>A 检查 <code>last_good_version</code>：<ul>
<li>若存在，A 立即下发 <code>apply_config</code> 请求，version &#x3D; <code>last_good_version</code> 给 B，要求 B 重新 apply（B 在 apply 时先清理当前运行态与目标版本不一致的 artifacts，再 apply last_good）。</li>
<li>若不存在（首次配置或 last_good 不可用），A 将进入 <code>maintenance</code> 状态并通知管理员（Web），并保留失败快照供人工恢复。</li>
</ul>
</li>
<li>B 在恢复过程中记录详细日志，最终上报恢复成功或失败。</li>
</ol>
<p><strong>B 的局部回滚（逆序清理）</strong>：仅作为补充方案（当恢复 last_good 比较重代价时），B 需能按 <code>applied_steps</code> 逆序清理；但要保证每一步清理也幂等且可重复。</p>
<h1 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h1><h2 id="1-系统总体架构"><a href="#1-系统总体架构" class="headerlink" title="1. 系统总体架构"></a>1. 系统总体架构</h2><p>本系统采用 <strong>分层解耦设计</strong>，分为 <strong>Web 前端、配置管理进程（A 进程）、配置执行进程（B 进程）、系统服务层</strong> 四个部分。</p>
<ul>
<li><strong>Web 前端</strong>：用户通过浏览器访问 Web 界面，配置 SSID 名称、频段、密码、模式（桥接&#x2F;NAT）、客户隔离、DHCP 地址池等参数。</li>
<li><strong>A 进程（配置管理）</strong>：负责接收前端传来的 JSON 配置，进行合法性校验，写入 Flash（防止断电丢失），并通过 socket 下发给 B 进程。</li>
<li><strong>B 进程（配置执行）</strong>：根据 A 进程下发的配置，调用 hostapd、dnsmasq、iptables、ip 工具等执行实际操作（启动&#x2F;停止虚拟 AP、配置 DHCP 服务、设置 NAT 规则等）。</li>
<li><strong>系统服务层</strong>：由 hostapd、dnsmasq、iptables&#x2F;nftables、内核 sysctl 参数等组成，真正完成数据面的运行。</li>
</ul>
<p>架构关系如下图所示：</p>
<pre class="mermaid">flowchart LR
  subgraph CP[Control Plane（控制面）]
    web[Web UI]
    A[Process A（配置管理）]
    B[Process B（配置执行）]
    web -->|JSON配置| A
    A -->|IPC: JSON消息| B
  end

  subgraph ST[Storage（持久化）]
    flash[(Flash config.json)]
  end

  subgraph SS[System Services（执行层）]
    hostapd[hostapd]
    dnsmasq[dnsmasq]
    iptool[ip/bridge/iw]
    nft[iptables/nftables]
    sysctl[sysctl]
  end

  subgraph DP[Data Plane（数据面）]
    wlan0[Normal-SSID]
    wlan01[Special-SSID]
    br0[[br0]]
    lan[LAN端口]
    wan[WAN出口]
    wlan0 --> br0
    lan --> br0
    wlan01 --> wan
    br0 --> wan
  end

  A --> flash
  B --> hostapd
  B --> dnsmasq
  B --> iptool
  B --> nft
  B --> sysctl</pre>

<hr>
<h2 id="2-配置下发与执行时序"><a href="#2-配置下发与执行时序" class="headerlink" title="2. 配置下发与执行时序"></a>2. 配置下发与执行时序</h2><p>系统配置流程采用 <strong>集中校验 + 分布执行</strong> 的模式：</p>
<ul>
<li><strong>A 进程</strong>保证配置一致性与持久化；</li>
<li><strong>B 进程</strong>保证配置在系统中的幂等执行；</li>
<li><strong>失败回滚机制</strong>确保系统稳定运行。</li>
</ul>
<p>详细时序如下：</p>
<pre class="mermaid">sequenceDiagram
  autonumber
  participant W as Web UI
  participant A as Process A
  %%participant F as Flash
  participant B as Process B
  participant H as hostapd
  participant D as dnsmasq
  participant N as ip/iw/bridge
  participant T as iptables/nft

  W->>A: 提交 JSON 配置
  A->>A: 解析+校验
  %%A->>F: 写入 Flash
  A->>A: 写入 Flash
  A-->>W: 返回已接收(version)

  A->>B: 下发 apply_config(version,配置)
  B->>B: 计算差异(diff)

  alt 新建/修改 SSID
    B->>H: 更新 hostapd 配置
    B->>N: 创建 VAP 接口并配置地址
    B->>D: 启动/更新 dnsmasq
    B->>T: 添加 NAT 规则
    B->>T: 启用 sysctl 转发
  else 删除 SSID
    B->>D: 停止 dnsmasq
    B->>T: 移除 NAT 规则
    B->>N: 删除接口配置
    B->>H: 移除 BSS
  end

  B-->>A: 返回执行结果
  alt 成功
    %%A->>F: 标记 last_good_version
    A->>A: 标记 last_good_version
    A-->>W: 通知成功
  else 失败
    A-->>W: 通知失败
    A->>B: 回滚至 last_good_version
  end</pre>

<hr>
<h2 id="3-配置字段到执行动作映射"><a href="#3-配置字段到执行动作映射" class="headerlink" title="3. 配置字段到执行动作映射"></a>3. 配置字段到执行动作映射</h2><p>每个 JSON 配置字段都对应系统执行动作，映射关系如下：</p>
<pre class="mermaid">stateDiagram-v2
  direction LR
  [*] --> SSID_Config

  state "SSID_Config" as SSID_Config {
    [*] --> name
    [*] --> band
    [*] --> channel
    [*] --> password
    [*] --> mode
    [*] --> client_isolation
    [*] --> dhcp
  }

  name --> hostapd: 设置 SSID 名称
  band --> hostapd: 选择频段
  channel --> hostapd: 设置信道
  password --> hostapd: WPA2/WPA3 密码
  mode --> bridge_nat: 决定桥接/NAT
  client_isolation --> hostapd: ap_isolate=1/0
  dhcp --> dnsmasq: DHCP地址池配置

  state "hostapd\n无线管理" as hostapd
  state "dnsmasq\nDHCP/DNS" as dnsmasq
  state "bridge/ip工具" as bridge_nat
  state "iptables\nNAT" as iptables_nat
  state "sysctl\n转发参数" as sysctl

  bridge_nat --> iptables_nat: 如果 NAT 模式，添加 SNAT
  bridge_nat --> sysctl: 如果 NAT 模式，开启转发
  bridge_nat --> bridge_nat: 如果 bridge 模式，加入 br0</pre>

<hr>
<h2 id="4-配置字段映射表"><a href="#4-配置字段映射表" class="headerlink" title="4. 配置字段映射表"></a>4. 配置字段映射表</h2><table>
<thead>
<tr>
<th>JSON 字段</th>
<th>示例值</th>
<th>校验规则</th>
<th>执行动作</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td><code>&quot;ssid1&quot;</code></td>
<td>唯一标识，必填</td>
<td>关联 wlan0_1 接口</td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>&quot;Special-SSID&quot;</code></td>
<td>长度 1~32，不重复</td>
<td>hostapd: 设置 SSID</td>
</tr>
<tr>
<td><code>band</code></td>
<td><code>&quot;2.4G&quot;</code> &#x2F; <code>&quot;5G&quot;</code></td>
<td>仅允许两种取值</td>
<td>hostapd: 设置 <code>hw_mode</code></td>
</tr>
<tr>
<td><code>channel</code></td>
<td><code>6</code> &#x2F; <code>36</code></td>
<td>合法信道，符合国家法规</td>
<td>hostapd: <code>channel=&lt;num&gt;</code></td>
</tr>
<tr>
<td><code>password</code></td>
<td><code>&quot;mypassword123&quot;</code></td>
<td>≥8 字符，WPA2&#x2F;WPA3 要求</td>
<td>hostapd: <code>wpa_passphrase</code></td>
</tr>
<tr>
<td><code>mode</code></td>
<td><code>&quot;bridge&quot;</code> &#x2F; <code>&quot;nat&quot;</code></td>
<td>必填</td>
<td>- bridge: 加入 br0 - nat: 配置 NAT&#x2F;DHCP</td>
</tr>
<tr>
<td><code>bridge_interface</code></td>
<td><code>&quot;br0&quot;</code></td>
<td>仅 bridge 模式下使用</td>
<td>ip&#x2F;bridge: <code>addif</code></td>
</tr>
<tr>
<td><code>client_isolation</code></td>
<td><code>true</code> &#x2F; <code>false</code></td>
<td>默认 false</td>
<td>hostapd: <code>ap_isolate=1/0</code></td>
</tr>
<tr>
<td><code>dhcp.enabled</code></td>
<td><code>true</code> &#x2F; <code>false</code></td>
<td>仅 NAT 模式可用</td>
<td>dnsmasq: 启动&#x2F;停止</td>
</tr>
<tr>
<td><code>dhcp.range_start</code></td>
<td><code>&quot;192.168.100.50&quot;</code></td>
<td>必须在子网内</td>
<td>dnsmasq: 分配范围</td>
</tr>
<tr>
<td><code>dhcp.range_end</code></td>
<td><code>&quot;192.168.100.150&quot;</code></td>
<td>必须在子网内</td>
<td>dnsmasq: 分配范围</td>
</tr>
<tr>
<td><code>dhcp.lease_time</code></td>
<td><code>&quot;12h&quot;</code></td>
<td><code>30m</code> &#x2F; <code>12h</code> &#x2F; <code>1d</code> 等格式</td>
<td>dnsmasq: 租约配置</td>
</tr>
<tr>
<td><code>dhcp.gateway</code></td>
<td><code>&quot;192.168.100.1&quot;</code></td>
<td>必须是接口 IP</td>
<td>ip addr: 配置接口；dnsmasq: 提供网关选项</td>
</tr>
<tr>
<td><code>dhcp.subnet_mask</code></td>
<td><code>&quot;255.255.255.0&quot;</code></td>
<td>与地址池一致</td>
<td>dnsmasq: 提供子网掩码选项</td>
</tr>
</tbody></table>
<hr>
<h2 id="5-设计要点总结"><a href="#5-设计要点总结" class="headerlink" title="5. 设计要点总结"></a>5. 设计要点总结</h2><ul>
<li><strong>解耦</strong>：A 进程与 B 进程分离，分别负责配置管理和执行，降低耦合度。</li>
<li><strong>幂等性</strong>：B 进程的执行动作必须幂等，保证重复下发不会造成脏数据。</li>
<li><strong>回滚机制</strong>：利用 <code>last_good_version</code> 支持失败自动回滚。</li>
<li><strong>扩展性</strong>：JSON 结构可扩展，未来可加入 QoS、速率限制、VLAN 等高级功能。</li>
</ul>
<h1 id="可行性与创新点"><a href="#可行性与创新点" class="headerlink" title="可行性与创新点"></a>可行性与创新点</h1><h2 id="1-技术可行性"><a href="#1-技术可行性" class="headerlink" title="1. 技术可行性"></a>1. 技术可行性</h2><ol>
<li><strong>成熟的组件支撑</strong><br> 系统底层基于业界广泛应用的 <strong>hostapd、dnsmasq、iptables&#x2F;nftables、Linux bridge</strong> 等工具。这些工具长期在路由器、嵌入式 Linux、OpenWrt 等场景中验证过，稳定性和兼容性有保障。</li>
<li><strong>轻量级架构</strong><br> A 进程和 B 进程均为轻量级守护进程，运行时资源占用小，不影响无线数据面的转发性能。</li>
<li><strong>接口标准化</strong><br> Web 前端与 A 进程采用 JSON 格式通信，A 与 B 进程使用 socket 消息传递，接口简单明了，便于后续扩展和测试。</li>
<li><strong>可移植性强</strong><br> 架构与硬件平台无关，仅依赖 Linux 内核及常见工具，因此可应用于 ARM 服务器、X86 网关、家庭路由器等多种平台。</li>
</ol>
<hr>
<h2 id="2-创新点"><a href="#2-创新点" class="headerlink" title="2. 创新点"></a>2. 创新点</h2><ol>
<li><strong>控制面与执行面解耦</strong><ul>
<li>传统 AP 方案中，配置下发与系统服务往往耦合在同一个进程或脚本中，难以维护。</li>
<li>本系统采用 <strong>A（配置管理）+ B（配置执行）</strong> 的双进程模式：<ul>
<li>A 进程专注于配置校验、持久化与版本管理；</li>
<li>B 进程专注于系统调用与实际执行。</li>
</ul>
</li>
<li>这种解耦提高了系统的稳定性和可维护性。</li>
</ul>
</li>
<li><strong>版本化配置与回滚机制</strong><ul>
<li>引入 <code>last_good_version</code>，确保配置失败时可自动回滚，避免因错误配置导致网络中断。</li>
<li>类似于现代云平台中的“配置快照”机制，在嵌入式 AP 配置中较少见。</li>
</ul>
</li>
<li><strong>JSON 模块化配置模型</strong><ul>
<li>使用统一的 JSON 配置，所有字段与执行动作一一映射。</li>
<li>支持未来扩展（如 QoS、VLAN、ACL、速率限制），无需大规模改动架构。</li>
</ul>
</li>
<li><strong>幂等执行保障</strong><ul>
<li>B 进程的操作设计为 <strong>幂等</strong>：重复执行不会造成异常副作用。</li>
<li>解决了传统脚本化配置容易出现“脏规则”、“残留接口”的问题。</li>
</ul>
</li>
<li><strong>面向用户体验的设计</strong><ul>
<li>用户只需通过 Web UI 完成配置，复杂的校验、持久化和执行均在后台完成。</li>
<li>支持 <strong>多 SSID、隔离、桥接&#x2F;NAT</strong> 等高级功能，面向家庭路由、企业网关均适用。</li>
</ul>
</li>
</ol>
<hr>
<h2 id="3-与传统方案对比"><a href="#3-与传统方案对比" class="headerlink" title="3. 与传统方案对比"></a>3. 与传统方案对比</h2><table>
<thead>
<tr>
<th>特点</th>
<th>传统 AP 配置方式</th>
<th>本系统方案</th>
</tr>
</thead>
<tbody><tr>
<td><strong>架构模式</strong></td>
<td>单进程&#x2F;脚本直接调用系统工具</td>
<td>控制面（A）与执行面（B）解耦</td>
</tr>
<tr>
<td><strong>配置存储</strong></td>
<td>配置文件，缺乏版本管理</td>
<td>JSON 配置，支持版本控制与回滚</td>
</tr>
<tr>
<td><strong>执行幂等性</strong></td>
<td>脚本执行，容易残留配置</td>
<td>B 进程保证幂等执行</td>
</tr>
<tr>
<td><strong>扩展性</strong></td>
<td>新功能需要修改脚本，难维护</td>
<td>JSON 字段可扩展，映射清晰</td>
</tr>
<tr>
<td><strong>用户体验</strong></td>
<td>多数基于命令行&#x2F;不直观 Web 配置</td>
<td>完全 Web 化，配置参数简单直观</td>
</tr>
<tr>
<td><strong>稳定性</strong></td>
<td>配置错误可能导致系统失效</td>
<td>失败自动回滚，保障系统持续可用</td>
</tr>
</tbody></table>
<hr>
<h2 id="4-应用前景"><a href="#4-应用前景" class="headerlink" title="4. 应用前景"></a>4. 应用前景</h2><ul>
<li><strong>家庭网关&#x2F;智能路由器</strong>：面向普通用户，提供多 SSID、家长控制、访客网络等功能。</li>
<li><strong>企业级 AP 管控</strong>：支持批量配置与远程管理，减少维护成本。</li>
<li><strong>云化&#x2F;虚拟化场景</strong>：作为 ARM 服务器或 X86 网关中的虚拟 AP 管理模块，适配多租户环境。</li>
</ul>
<h1 id="4-研究思路和方法-1"><a href="#4-研究思路和方法-1" class="headerlink" title="4 研究思路和方法"></a>4 研究思路和方法</h1><p>本章重点说明实现方案的工程思路、关键方法与落地细节，突出架构设计、数据与协议、执行模型、错误恢复、安全性、测试与交付策略，展示工程能力与可实施性。内容尽量技术化、可执行，便于在两个月内产出可演示原型。</p>
<hr>
<h2 id="4-1-思路与总体方法论（总体原则）"><a href="#4-1-思路与总体方法论（总体原则）" class="headerlink" title="4.1 思路与总体方法论（总体原则）"></a>4.1 思路与总体方法论（总体原则）</h2><ol>
<li><strong>分层解耦（Separation of concerns）</strong><ul>
<li>控制面（A 进程，配置管理）负责：JSON 校验、版本化、持久化、与 Web 的 API。</li>
<li>执行面（B 进程）负责：读取配置、计算差异、对系统服务发出幂等化命令、记录运行态。<br> 这样能降低单点复杂度、便于单元化开发与测试。</li>
</ul>
</li>
<li><strong>幂等与可重做（Idempotence &#x2F; Reconciliation）</strong><ul>
<li>B 对每一步操作必须先检查“是否已存在&#x2F;已生效”，然后才「创建&#x2F;修改&#x2F;删除」。</li>
<li>所有外部副作用（iptables、ip addr、dnsmasq conf、hostapd）使用“检查→执行→验证”三段式。</li>
</ul>
</li>
<li><strong>版本化与原子持久化（Atomic persistence &amp; Versioning）</strong><ul>
<li>A 将每次提交写成 <code>config_&lt;version&gt;.json</code>，使用临时文件 + fsync + rename 保证原子性，并维护 <code>current</code> 与 <code>last_good</code> 指针。</li>
<li>回滚以 <code>last_good</code> 为主（更稳妥）——出错则重新 apply last_good。</li>
</ul>
</li>
<li><strong>差异化下发（Delta &#x2F; Diff）</strong><ul>
<li>B 在 apply 前读取当前运行态（running_state），计算 create&#x2F;modify&#x2F;delete 三类差异，只对差异项操作，减少对服务的影响。</li>
</ul>
</li>
<li><strong>顺序与事务语义（Ordered, transactional-ish）</strong><ul>
<li>对单个 SSID 的执行顺序固定：创建 VAP → 配置 IP → 启动 DHCP → 配置 NAT&#x2F;防火墙 → 验证。删除按逆序。</li>
<li>若中间失败，触发回滚或恢复 last_good。</li>
</ul>
</li>
<li><strong>可观测性（Observability）</strong><ul>
<li>结构化日志（JSONL），每步写入 <code>timestamp/version/ssid/step/result/details</code>；A 可将执行状态实时传回 Web（WebSocket&#x2F;SSE）。</li>
</ul>
</li>
<li><strong>安全与最小权限（Security &amp; Least privilege）</strong><ul>
<li>IPC（Unix domain socket）权限限制、敏感数据（password）以最小权限持久化或加密（可选）。</li>
<li>B 运行时尽可能以非 root 用户跑，只有在执行系统命令时临时提权（若平台支持）。</li>
</ul>
</li>
</ol>
<hr>
<h2 id="4-2（略）友商调研"><a href="#4-2（略）友商调研" class="headerlink" title="4.2（略）友商调研"></a>4.2（略）友商调研</h2><blockquote>
<p>按您前文指示，本节可由您按需补充；此处略去，以便把精力集中在实现细节与工程化方案上。</p>
</blockquote>
<hr>
<h2 id="4-3-方案设计与工程实现细节（可落地的工程化方案）"><a href="#4-3-方案设计与工程实现细节（可落地的工程化方案）" class="headerlink" title="4.3 方案设计与工程实现细节（可落地的工程化方案）"></a>4.3 方案设计与工程实现细节（可落地的工程化方案）</h2><p>下面按要点展开：数据模型、IPC 协议、B 的执行模型、事务与回滚、并发与锁、日志与监控、测试与交付建议等。</p>
<h3 id="4-3-1-数据模型与校验（工程实现要点）"><a href="#4-3-1-数据模型与校验（工程实现要点）" class="headerlink" title="4.3.1 数据模型与校验（工程实现要点）"></a>4.3.1 数据模型与校验（工程实现要点）</h3><ul>
<li><strong>JSON Schema</strong>（A 用于自动校验）<ul>
<li>必要字段：<code>version</code>、<code>ssids[]</code>；SSIDs 内字段如 <code>id,name,band,channel,mode,client_isolation,dhcp&#123;enabled,gateway,range_start,range_end,lease_time&#125;</code>。</li>
<li>校验举例：<code>id</code> 用正则 <code>^[A-Za-z0-9_\-]&#123;1,32&#125;$</code>；<code>channel</code> 根据 <code>band</code> 再做范围校验；<code>dhcp.range</code> 在同一子网且 <code>gateway</code> 不在池内。</li>
</ul>
</li>
<li><strong>语义校验扩展（A 进程）</strong><ul>
<li>全局 IP 池冲突检测（遍历已有 ssids 的 subnet，拒绝重叠）；</li>
<li>驱动&#x2F;国家限制（channel DFS 检查，可选）；</li>
<li>VIF 指定合法性（若 user 提供 vif 名称，A 检查命名空间是否空闲）。</li>
</ul>
</li>
<li><strong>持久化格式</strong><ul>
<li><code>config_&lt;version&gt;.json</code> + <code>current</code> 指向 + <code>last_good</code> 指向；读写通过临时文件原子替换。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="4-3-2-IPC-协议（A-⇄-B）（工程细节）"><a href="#4-3-2-IPC-协议（A-⇄-B）（工程细节）" class="headerlink" title="4.3.2 IPC 协议（A ⇄ B）（工程细节）"></a>4.3.2 IPC 协议（A ⇄ B）（工程细节）</h3><ul>
<li><p><strong>通信方式</strong>：Unix Domain Socket（<code>/var/run/myap.sock</code>），权限 <code>0700</code>。</p>
</li>
<li><p><strong>消息格式</strong>：JSON（包含 <code>action</code>, <code>version</code>, <code>config_path</code>, <code>delta</code> 等）。</p>
</li>
<li><p><strong>A→B 重要消息</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;action&quot;:&quot;apply_config&quot;,</span><br><span class="line">  &quot;version&quot;:42,</span><br><span class="line">  &quot;config_path&quot;:&quot;/etc/myap/config_42.json&quot;,</span><br><span class="line">  &quot;delta&quot;:&#123;&quot;create&quot;:[&quot;guest_nat&quot;],&quot;modify&quot;:[],&quot;delete&quot;:[]&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>B→A 回执</strong>：流式上报 + 最终回执（<code>apply_result</code> 字段包含 status, errors, applied_steps）。</p>
</li>
<li><p><strong>超时与重试</strong>：A 应在发出 apply 后开始计时；若 B 无响应或 socket 断开，A 重试 1 次后标记为 <code>apply_failed</code> 并报警（Web 通知）。</p>
</li>
<li><p><strong>同步&#x2F;异步</strong>：apply 是 “异步执行并回执” 模式（A 立刻返回 202，B 完成后通过 WebSocket 通知用户）。这样界面响应快且不阻塞。</p>
<ul>
<li>注意：在内部实现上仍保证单 apply 的串行化（使用文件锁&#x2F;进程互斥）。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="4-3-3-B-进程执行模型（核心工程设计）"><a href="#4-3-3-B-进程执行模型（核心工程设计）" class="headerlink" title="4.3.3 B 进程执行模型（核心工程设计）"></a>4.3.3 B 进程执行模型（核心工程设计）</h3><ul>
<li><strong>运行态（running_state）管理</strong><ul>
<li><code>/var/run/myap_running.json</code>：记录当前生效配置（version、每 ssid 状态、接口名、nat rule ids 等）。B 在成功 apply 后更新此文件。</li>
</ul>
</li>
<li><strong>差异（diff）算法</strong><ul>
<li>对比 <code>running_state</code> 与 <code>target_config</code> 得到 <code>create/modify/delete</code> 列表；修改应细化为“哪些字段变了”（例如仅密码&#x2F;仅 channel）。</li>
</ul>
</li>
<li><strong>每 SSID 的执行步骤（模板）</strong><ol>
<li><code>prepare</code>: 检查依赖（驱动、接口名空闲）。</li>
<li><code>create_iface</code>: <code>iw dev</code> 或 hostapd bss add；<code>ip link set up</code>。</li>
<li><code>set_ip</code>: <code>ip addr add &lt;gateway&gt;/&lt;mask&gt; dev vif</code>。</li>
<li><code>start_dhcp</code>: 写 <code>/etc/dnsmasq.d/ssid_&lt;id&gt;.conf</code> → reload dnsmasq（SIGHUP）。</li>
<li><code>add_nat</code>: <code>iptables -t nat -C ... || iptables -t nat -A ... -m comment --comment &quot;ssid:&lt;id&gt;&quot;</code>。</li>
<li><code>verify</code>: 检查 <code>ip addr show</code>、dnsmasq leases、iptables 规则存在性。</li>
</ol>
</li>
<li><strong>幂等实现要点</strong><ul>
<li>对每个步骤前做存在检查；对文件写入做临时文件 + rename；对 iptables 使用 comment 标识以便精确删除。</li>
</ul>
</li>
<li><strong>错误处理与补偿</strong><ul>
<li>B 记录 <code>applied_steps</code>（顺序 list）。若失败，B 可选择：<ul>
<li>发送失败给 A（由 A 触发恢复 last_good）；或</li>
<li>自行逆序回滚 applied_steps（若实现了每一步对应的逆操作且已验证其幂等性）。</li>
</ul>
</li>
<li>推荐策略：B 报告错误并等待 A 下发恢复 last_good（集中掌控，减少复杂度）。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="4-3-4-事务语义与回滚策略（工程建议）"><a href="#4-3-4-事务语义与回滚策略（工程建议）" class="headerlink" title="4.3.4 事务语义与回滚策略（工程建议）"></a>4.3.4 事务语义与回滚策略（工程建议）</h3><ul>
<li><strong>主回滚策略（推荐）</strong>：A 维护 <code>last_good_version</code>，当 B 报错，A 触发 <code>apply_config</code> 对 <code>last_good_version</code> 的重新下发。优点是恢复行为确定且可重复验证。</li>
<li><strong>局部补偿策略（可选）</strong>：B 在可控情况下逆序清理 <code>applied_steps</code>，此策略用于节省重做成本，但复杂且必须保证逆操作也幂等。</li>
<li><strong>事务边界</strong>：单次 apply 的边界为 <code>version</code>：要么 B 最终使系统与 <code>config_&lt;version&gt;</code> 对应（成功），要么 B 不做永久性变更并返回失败（由 A 恢复 last_good）。</li>
</ul>
<hr>
<h3 id="4-3-5-并发控制与锁（关键实现点）"><a href="#4-3-5-并发控制与锁（关键实现点）" class="headerlink" title="4.3.5 并发控制与锁（关键实现点）"></a>4.3.5 并发控制与锁（关键实现点）</h3><ul>
<li><strong>全局 apply 锁</strong>：在 A 下发前尝试获得文件锁（<code>/var/lock/myap_apply.lock</code>），B 在执行开始时也获取相同锁。确保任一时间只有一个 apply 在运行。</li>
<li><strong>读写分离</strong>：运行态文件读可并发；写入需持锁。</li>
<li><strong>防止 UI 重复提交</strong>：A 对短时间内相同配置的重复提交做去重（如果版本未变则返回已有结果）。</li>
</ul>
<hr>
<h3 id="4-3-6-日志、监控与可观测性（工程化交付要点）"><a href="#4-3-6-日志、监控与可观测性（工程化交付要点）" class="headerlink" title="4.3.6 日志、监控与可观测性（工程化交付要点）"></a>4.3.6 日志、监控与可观测性（工程化交付要点）</h3><ul>
<li><strong>结构化日志（JSON lines）</strong>：每条记录包含 <code>ts, version, ssid, step, result, message, elapsed_ms</code>，便于 ELK&#x2F;Fluentd 收集与查询。</li>
<li><strong>运行态监控指标（Prometheus friendly）</strong>（若平台允许）：<ul>
<li><code>myap_apply_duration_seconds&#123;status=&quot;success|fail&quot;&#125;</code>,</li>
<li><code>myap_active_ssid_count</code>,</li>
<li><code>myap_dhcp_lease_count&#123;ssid=&quot;&lt;id&gt;&quot;&#125;</code></li>
</ul>
</li>
<li><strong>查询接口</strong>：A 提供 <code>GET /api/status</code> 返回 <code>current_version</code>, <code>last_good_version</code>, <code>pending_apply</code>, <code>per_ssid_status</code>。</li>
<li><strong>报警&#x2F;通知</strong>：apply 失败通过 WebSocket 推送到前端，并写告警日志，必要时邮件&#x2F;企业微信推送（可选）。</li>
</ul>
<hr>
<h3 id="4-3-7-安全与敏感数据处理（工程建议）"><a href="#4-3-7-安全与敏感数据处理（工程建议）" class="headerlink" title="4.3.7 安全与敏感数据处理（工程建议）"></a>4.3.7 安全与敏感数据处理（工程建议）</h3><ul>
<li><strong>IPC 权限</strong>：<code>/var/run/myap.sock</code> 权限 <code>0700</code>，仅 A&#x2F;B 属主可访问。</li>
<li><strong>持久化文件权限</strong>：<code>/etc/myap/*.json</code>、<code>/etc/dnsmasq.d/ssid_*.conf</code> 权限 <code>0600</code>（仅 root 或特定用户可读写）。</li>
<li><strong>密码处理</strong>：不在日志中写明文密码；A 可以在磁盘上加密保存或仅保存配置元数据并在需要时由安全存储接口取回。</li>
<li><strong>最小提权</strong>：B 作为执行器仅在需要时调用系统命令；若系统支持，可通过 <code>sudo</code> 精细授权单个命令。</li>
</ul>
<hr>
<h3 id="4-3-8-测试策略（保证可交付性）"><a href="#4-3-8-测试策略（保证可交付性）" class="headerlink" title="4.3.8 测试策略（保证可交付性）"></a>4.3.8 测试策略（保证可交付性）</h3><ul>
<li><strong>单元测试（A）</strong>：JSON Schema 校验、语义校验、IP 池冲突检测、channel&#x2F; band 校验。</li>
<li><strong>组件集成测试（B）</strong>：模拟 hostapd&#x2F;dnsmasq 环境（或在虚拟化测试机上），验证 create&#x2F;modify&#x2F;delete 的所有步骤与幂等性。</li>
<li><strong>故障注入测试</strong>：人为使 dnsmasq 端口被占用、iptables 写失败，验证系统能正确上报并回滚到 last_good。</li>
<li><strong>压力与稳定性测试</strong>：高频次 apply（例如每秒 1 次持续 5 分钟）并检查是否有残留规则或内存泄露；24–72 小时稳定运行。</li>
<li><strong>验收测试清单</strong>（用于交付验收）：<ul>
<li>新增 NAT SSID，客户端可拿到 DHCP 并上网；</li>
<li>修改 channel&#x2F;password，按预期生效；</li>
<li>删除 SSID 后无残留规则、lease 文件；</li>
<li>apply 失败时系统恢复到 last_good。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="4-3-9-开发与交付流程（工程实践）"><a href="#4-3-9-开发与交付流程（工程实践）" class="headerlink" title="4.3.9 开发与交付流程（工程实践）"></a>4.3.9 开发与交付流程（工程实践）</h3><ul>
<li><p><strong>代码结构建议</strong>（示例）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/cmd/</span><br><span class="line">  a-process/   # A 进程入口</span><br><span class="line">  b-process/   # B 进程入口</span><br><span class="line">/pkg/</span><br><span class="line">  config/      # schema, validation</span><br><span class="line">  ipc/         # socket client/server</span><br><span class="line">  executor/    # B 的执行逻辑（封装系统调用）</span><br><span class="line">  hostapd/     # hostapd 操作封装</span><br><span class="line">  dnsmasq/     # dnsmasq conf helper</span><br><span class="line">  iptables/    # rule helper</span><br><span class="line">  util/        # logging, fs atomic write</span><br><span class="line">/tests/</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>语言与工具建议</strong>：</p>
<ul>
<li>A：Go &#x2F; Python（优点：快速开发、JSON&#x2F;HTTP 支持好）；</li>
<li>B：Go &#x2F; Rust &#x2F; C（优点：Go 易并发、跨平台；Rust&#x2F;C 对资源占用控制更细）。</li>
<li>测试环境：使用 QEMU 或现成的 OpenWrt 镜像做 CI 集成测试。</li>
</ul>
</li>
<li><p><strong>CI&#x2F;CD</strong>：单元测试 → 镜像构建（交叉编译）→ 集成测试（虚拟机）→ 打包（deb&#x2F;ipk）→ 发布到 test channel。</p>
</li>
<li><p><strong>交付物</strong>：可执行二进制、systemd service files、安装脚本、测试报告、演示说明文档。</p>
</li>
</ul>
<hr>
<h2 id="4-4-关键流程-Mermaid-时序图（用于报告插图）"><a href="#4-4-关键流程-Mermaid-时序图（用于报告插图）" class="headerlink" title="4.4 关键流程 Mermaid 时序图（用于报告插图）"></a>4.4 关键流程 Mermaid 时序图（用于报告插图）</h2><pre class="mermaid">sequenceDiagram
  autonumber
  participant Web as Web 前端
  participant A as A 进程 (配置管理)
  participant B as B 进程 (配置执行)
  participant H as hostapd
  participant D as dnsmasq
  participant N as ip/iptables

  Note over Web,A: 用户提交配置（JSON）
  Web->>A: POST /api/config {config}
  A->>A: Schema + 语义校验
  alt 校验通过
    A->>A: 写入 /etc/myap/config_V.json 原子替换
    A->>B: IPC apply_config {version:V, path:/etc/myap/config_V.json}
    B->>B: 读取 target config & running_state
    B->>B: compute diff (create/modify/delete)
    alt create or modify ssid
      B->>H: hostapd add bss / reconfigure
      B->>B: create vif (if needed)
      B->>N: ip addr add <gateway>/mask dev vif
      B->>D: write /etc/dnsmasq.d/ssid_X.conf & reload dnsmasq
      B->>N: iptables -C .. || iptables -A ... --comment "ssid:X"
      B->>B: verify (ip show, dnsmasq leases, iptables)
    end
    B-->>A: apply_result {status:success}
    A->>Web: push apply_done
  else 校验失败
    A-->>Web: 400 Bad Request (error details)
  end</pre>

<hr>
<h2 id="4-5-小结（可交付的工程能力点）"><a href="#4-5-小结（可交付的工程能力点）" class="headerlink" title="4.5 小结（可交付的工程能力点）"></a>4.5 小结（可交付的工程能力点）</h2><ul>
<li>本章展示了从<strong>数据模型、协议、执行模型、事务&#x2F;回滚、幂等性与测试</strong>到<strong>交付流程</strong>的一整套工程实践方法。</li>
<li>这些细节既能用于两个月内实现可演示的原型，也确保系统具备可维护性、可扩展性与工程质量，便于将来添加 QoS、VLAN、远程管理等高级功能。</li>
</ul>
<h1 id="5-重点与难点"><a href="#5-重点与难点" class="headerlink" title="5. 重点与难点"></a>5. 重点与难点</h1><h3 id="5-1-重点-1"><a href="#5-1-重点-1" class="headerlink" title="5.1 重点"></a>5.1 重点</h3><p><strong>（1）JSON 配置模型与系统服务的映射关系</strong><br> 本课题的核心在于：如何将用户通过 Web 界面配置的 JSON 数据，可靠地映射到系统底层服务（hostapd、dnsmasq、iptables 等）。</p>
<ul>
<li><strong>字段校验</strong>：A 进程负责语义校验（SSID 唯一、IP 不重叠、密码长度合规、信道合法性等），保证不合规配置不会下发。</li>
<li><strong>执行映射</strong>：B 进程根据 JSON 配置执行对应操作，例如：<ul>
<li><code>ssid</code> → 写入 hostapd 配置项</li>
<li><code>mode=nat</code> → 分配子网、添加 iptables NAT 规则</li>
<li><code>dhcp.range</code> → 生成 dnsmasq 配置文件并重载</li>
<li><code>client_isolation</code> → hostapd <code>ap_isolate=1</code></li>
</ul>
</li>
<li><strong>幂等性</strong>：所有操作需支持重复下发无副作用，例如 iptables 规则加前先检查存在性、配置文件更新采用原子替换。</li>
</ul>
<p><strong>（2）接口与流程设计</strong></p>
<ul>
<li><strong>A 进程</strong>：负责配置解析、校验、版本管理与持久化。</li>
<li><strong>B 进程</strong>：负责具体实施，按差异（diff）对接口、DHCP、NAT 等进行增删改。</li>
<li><strong>交互协议</strong>：A 与 B 通过 socket 传递 JSON 消息，包含版本号、变更项、配置文件路径等。</li>
</ul>
<p><strong>（3）回滚机制</strong></p>
<ul>
<li>推荐方案：A 保存 <code>last_good_version</code>，一旦 B 执行失败，则回滚到上一个稳定版本重新下发，保证系统处于可用状态。</li>
</ul>
<hr>
<h3 id="5-2-难点-1"><a href="#5-2-难点-1" class="headerlink" title="5.2 难点"></a>5.2 难点</h3><p><strong>（1）幂等性与一致性</strong></p>
<ul>
<li><strong>难点</strong>：直接脚本化操作可能导致重复规则或残留资源。</li>
<li><strong>对策</strong>：<ul>
<li>使用 iptables <code>--comment &quot;ssid:&lt;id&gt;&quot;</code> 标记规则，便于删除。</li>
<li>dnsmasq&#x2F;hostapd 使用 per-SSID 配置文件，重载时只影响对应 SSID。</li>
<li>接口创建前检查是否存在，避免重复创建或误删。</li>
</ul>
</li>
</ul>
<p><strong>（2）hostapd&#x2F;dnsmasq 动态更新</strong></p>
<ul>
<li><strong>难点</strong>：服务重启可能中断所有 SSID。</li>
<li><strong>对策</strong>：优先使用 hostapd 的 <code>bss</code> 段和 <code>hostapd_cli reconfigure</code>，dnsmasq 采用 <code>--conf-dir</code> + <code>SIGHUP</code> 实现平滑重载。</li>
</ul>
<p><strong>（3）NAT 与 Bridge 并存的复杂性</strong></p>
<ul>
<li><strong>难点</strong>：不同 SSID 使用 NAT 与桥接模式并存，容易产生转发冲突。</li>
<li><strong>对策</strong>：<ul>
<li>在配置校验阶段禁止 IP 地址池重叠。</li>
<li>将 NAT 规则集中在单独链（如 <code>MYAP-NAT</code>），由 B 专门管理，保证清理彻底。</li>
</ul>
</li>
</ul>
<p><strong>（4）回滚与故障恢复</strong></p>
<ul>
<li><strong>难点</strong>：部分步骤失败后系统可能处于不一致状态。</li>
<li><strong>对策</strong>：<ul>
<li>优先恢复到上一个稳定版本而非逐步逆序回滚，减少复杂度。</li>
<li>保留执行日志和快照，便于快速定位与人工介入。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="5-3-验收与测试要点（简述）"><a href="#5-3-验收与测试要点（简述）" class="headerlink" title="5.3 验收与测试要点（简述）"></a>5.3 验收与测试要点（简述）</h3><ul>
<li><strong>功能性</strong>：新增、修改、删除 SSID 能正确映射到系统服务。</li>
<li><strong>可靠性</strong>：重复下发配置不应产生冗余规则；失败后能回滚。</li>
<li><strong>稳定性</strong>：在高频配置切换下，系统无残留、无内存泄漏。</li>
<li><strong>安全性</strong>：敏感配置（如密码）不出现在日志或持久化文件中。</li>
</ul>
<h1 id="实施计划"><a href="#实施计划" class="headerlink" title="实施计划"></a>实施计划</h1><h2 id="总体目标"><a href="#总体目标" class="headerlink" title="总体目标"></a>总体目标</h2><p>在 2 个月内，完成一个支持 <strong>多 SSID、桥接&#x2F;NAT 模式切换、DHCP 服务、客户端隔离</strong> 的无线 AP 原型系统，支持 Web UI 配置，具备基本的稳定性和可维护性。</p>
<hr>
<h2 id="阶段划分"><a href="#阶段划分" class="headerlink" title="阶段划分"></a>阶段划分</h2><h3 id="阶段一：需求分析与设计（2025-09-02-–-2025-09-10）"><a href="#阶段一：需求分析与设计（2025-09-02-–-2025-09-10）" class="headerlink" title="阶段一：需求分析与设计（2025&#x2F;09&#x2F;02 – 2025&#x2F;09&#x2F;10）"></a>阶段一：需求分析与设计（2025&#x2F;09&#x2F;02 – 2025&#x2F;09&#x2F;10）</h3><ul>
<li>明确用户配置需求（SSID、频段、密码、模式、DHCP、隔离等）。</li>
<li>确认采用的系统组件：<code>hostapd</code>、<code>dnsmasq</code>、<code>iptables/nftables</code>、<code>iproute2</code>。</li>
<li>定义 JSON 配置模型（字段、校验规则、与系统服务的映射关系）。</li>
<li>绘制架构图、时序图、配置映射表，形成完整设计文档。</li>
</ul>
<p><strong>输出成果</strong>：</p>
<ul>
<li>《系统设计文档》</li>
<li>JSON 配置 schema</li>
<li>架构&#x2F;交互图</li>
</ul>
<hr>
<h3 id="阶段二：A-进程开发（配置管理）（2025-09-11-–-2025-09-20）"><a href="#阶段二：A-进程开发（配置管理）（2025-09-11-–-2025-09-20）" class="headerlink" title="阶段二：A 进程开发（配置管理）（2025&#x2F;09&#x2F;11 – 2025&#x2F;09&#x2F;20）"></a>阶段二：A 进程开发（配置管理）（2025&#x2F;09&#x2F;11 – 2025&#x2F;09&#x2F;20）</h3><ul>
<li>解析 Web 前端传递的 JSON 配置。</li>
<li>校验参数合法性（SSID 名称、信道范围、IP 地址合法性等）。</li>
<li>将配置存储到 Flash（JSON 文件，带版本号）。</li>
<li>与 Web 交互：提供配置保存&#x2F;读取 API。</li>
<li>与 B 进程通信：定义 socket 协议，支持“下发配置”“回滚”“查询状态”。</li>
</ul>
<p><strong>输出成果</strong>：</p>
<ul>
<li>A 进程可运行 Demo</li>
<li>与 Web 的 JSON 通信测试通过</li>
<li>与 B 进程的 socket 协议定义完成</li>
</ul>
<hr>
<h3 id="阶段三：B-进程开发（配置执行）（2025-09-21-–-2025-10-05）"><a href="#阶段三：B-进程开发（配置执行）（2025-09-21-–-2025-10-05）" class="headerlink" title="阶段三：B 进程开发（配置执行）（2025&#x2F;09&#x2F;21 – 2025&#x2F;10&#x2F;05）"></a>阶段三：B 进程开发（配置执行）（2025&#x2F;09&#x2F;21 – 2025&#x2F;10&#x2F;05）</h3><ul>
<li>接收 A 进程下发的配置指令。</li>
<li>管理 hostapd（启动&#x2F;停止虚拟 AP）。</li>
<li>管理 dnsmasq（根据模式决定是否启用 DHCP）。</li>
<li>配置桥接接口（bridge 模式）。</li>
<li>配置 iptables&#x2F;nftables（NAT 模式）。</li>
<li>实现幂等性：重复下发不会导致系统混乱。</li>
<li>回滚机制：配置失败时恢复到上一个版本。</li>
</ul>
<p><strong>输出成果</strong>：</p>
<ul>
<li>B 进程可单独运行，能正确配置系统服务</li>
<li>支持桥接和 NAT 模式切换</li>
<li>DHCP 地址池生效测试通过</li>
</ul>
<hr>
<h3 id="阶段四：集成与测试（2025-10-06-–-2025-10-20）"><a href="#阶段四：集成与测试（2025-10-06-–-2025-10-20）" class="headerlink" title="阶段四：集成与测试（2025&#x2F;10&#x2F;06 – 2025&#x2F;10&#x2F;20）"></a>阶段四：集成与测试（2025&#x2F;10&#x2F;06 – 2025&#x2F;10&#x2F;20）</h3><ul>
<li>Web → A → B → 系统服务全链路打通。</li>
<li>测试多 SSID 并发（一个桥接，一个 NAT）。</li>
<li>测试客户端隔离（ap_isolate）。</li>
<li>测试配置错误场景（应自动回滚）。</li>
<li>长时间运行稳定性测试（≥24h）。</li>
</ul>
<p><strong>输出成果</strong>：</p>
<ul>
<li>集成系统 Demo 可运行</li>
<li>基本功能测试报告</li>
</ul>
<hr>
<h3 id="阶段五：优化与交付（2025-10-21-–-2025-11-02）"><a href="#阶段五：优化与交付（2025-10-21-–-2025-11-02）" class="headerlink" title="阶段五：优化与交付（2025&#x2F;10&#x2F;21 – 2025&#x2F;11&#x2F;02）"></a>阶段五：优化与交付（2025&#x2F;10&#x2F;21 – 2025&#x2F;11&#x2F;02）</h3><ul>
<li>代码优化、日志完善。</li>
<li>增加监控接口（查询当前 SSID、DHCP 租约、iptables 状态）。</li>
<li>撰写最终报告和演示文档。</li>
<li>准备答辩 Demo。</li>
</ul>
<p><strong>输出成果</strong>：</p>
<ul>
<li>《最终技术报告》</li>
<li>可演示的 AP 系统（支持 Web 配置）</li>
</ul>
<hr>
<h2 id="时间表（甘特图示例）"><a href="#时间表（甘特图示例）" class="headerlink" title="时间表（甘特图示例）"></a>时间表（甘特图示例）</h2><pre class="mermaid">gantt
    title 项目实施计划 (2025/09/02 - 2025/11/02)
    dateFormat  YYYY-MM-DD
    axisFormat  %m/%d

    section 阶段一: 需求分析与设计
    需求分析与设计          :done,   des1, 2025-09-02, 2025-09-10

    section 阶段二: A进程开发
    A进程开发(配置管理)      :active, des2, 2025-09-11, 2025-09-20

    section 阶段三: B进程开发
    B进程开发(配置执行)      :des3, 2025-09-21, 2025-10-05

    section 阶段四: 集成与测试
    系统集成与功能测试       :des4, 2025-10-06, 2025-10-20

    section 阶段五: 优化与交付
    优化与文档交付           :des5, 2025-10-21, 2025-11-02</pre>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2025/09/08/module/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-SSID-NAT-mode" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/09/06/SSID-NAT-mode/">SSID-NAT-mode</a>
    </h1>
  

        
        <a href="/2025/09/06/SSID-NAT-mode/" class="archive-article-date">
  	<time datetime="2025-09-05T17:29:28.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2025-09-06</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="NAT-Mode-with-Meraki-DHCP"><a href="#NAT-Mode-with-Meraki-DHCP" class="headerlink" title="NAT Mode with Meraki DHCP"></a><a target="_blank" rel="noopener" href="https://documentation.meraki.com/MR/Client_Addressing_and_Bridging/NAT_Mode_with_Meraki_DHCP">NAT Mode with Meraki DHCP</a></h1><p><a target="_blank" rel="noopener" href="https://documentation.meraki.com/MR/Client_Addressing_and_Bridging/SSID_Modes_for_Client_IP_Assignment">NAT mode with Meraki DHCP</a> allows an MR access point to provide client addressing by running its own DHCP server to simplify management, allow guest access, and provide client isolation functionality. </p>
<h2 id="Client-Addressing-in-NAT-mode-with-Meraki-DHCP"><a href="#Client-Addressing-in-NAT-mode-with-Meraki-DHCP" class="headerlink" title="Client Addressing in NAT mode with Meraki DHCP"></a>Client Addressing in NAT mode with Meraki DHCP</h2><p>The DHCP server run by the Cisco Meraki AP provides addresses in the 10.0.0.0&#x2F;8 subnet (10.x.x.x). Outbound connections will be initiated with the LAN IP address of the AP using Network Address Translation. Wireless clients that connect to the network will be given the following configuration via Meraki DHCP:</p>
<ul>
<li>An IP address in the 10.0.0.0&#x2F;8 range. The IP address is created by running the client’s MAC address through a hashing algorithm.</li>
<li>A gateway address of 10.128.128.128</li>
<li><a target="_blank" rel="noopener" href="https://documentation.meraki.com/MR/Client_Addressing_and_Bridging/NAT_Mode_with_Meraki_DHCP#DNS_and_NAT_Mode">A DNS address of 10.128.128.128</a></li>
<li>A Lease Time of 24 hours</li>
</ul>
<p>A wireless network using NAT Mode with Meraki DHCP can be seen below. When clients on the wireless network access resources upstream of the AP, their IP addresses will be translated to the IP address of the AP (192.168.1.1):</p>
<p><img src="/2025/09/06/SSID-NAT-mode/Example_Topology.jpeg" alt="2 Clients with 10.x.x.x addresses wirelessly connected to the AP, which then gets NATed into the APs Management IP to the internet"></p>
<h2 id="Client-Isolation"><a href="#Client-Isolation" class="headerlink" title="Client Isolation"></a>Client Isolation</h2><p>NAT mode with Meraki DHCP isolates clients. Devices with a Meraki DHCP address will be able to access external and internal resources, such as the Internet and LAN (<a target="_blank" rel="noopener" href="https://documentation.meraki.com/MR/Firewall_and_Traffic_Shaping/'Deny_Local_LAN'_settings_in_Cisco_Meraki_MR_firewall">if firewall rules permit</a>). However, connected clients will be unable to contact each other. The client isolation features of Meraki DHCP can be seen in the above figure. Client A and Client B can both access the Internet. When Client A wants to send traffic to Client B, the traffic will reach the AP. However, the AP <strong>will not</strong> forward this traffic to Client B. Therefore, the two clients are isolated from each other.</p>
<p>Since the client isolation function of NAT mode prevents wireless devices on the SSID from communicating with other wireless devices, NAT mode is not recommended for use with wireless peer-to-peer devices like a wireless printer or Google Chromecast.</p>
<p>Due to the implementation of client isolation, clients on a NAT mode SSID cannot talk to clients on a bridge-mode SSID when both clients are connected to the same AP.</p>
<h2 id="Configuring-NAT-mode-with-Meraki-DHCP"><a href="#Configuring-NAT-mode-with-Meraki-DHCP" class="headerlink" title="Configuring NAT mode with Meraki DHCP"></a>Configuring NAT mode with Meraki DHCP</h2><p>To configure NAT mode with Meraki DHCP on an SSID, follow the directions below:</p>
<ol>
<li>Navigate to <strong>Wireless &gt;</strong> <strong>Configure &gt; Access control</strong></li>
<li>Select the appropriate SSID from the SSID menu at the top of the page</li>
<li>Under the <strong>Client IP and VLAN</strong> section, select <strong>Meraki AP assigned (NAT mode)</strong>, as seen in the image below</li>
<li>Click <strong>Save</strong></li>
</ol>
<p><img src="/2025/09/06/SSID-NAT-mode/NAT_mode.png" alt="NAT mode configuration "></p>
<h2 id="DNS-and-NAT-Mode"><a href="#DNS-and-NAT-Mode" class="headerlink" title="DNS and NAT Mode"></a>DNS and NAT Mode</h2><p>In NAT mode, a Cisco Meraki AP acts as a DNS forwarder. DNS resolution in NAT mode follows the process below.</p>
<ol>
<li>Wireless client sends DNS query to the AP at 10.128.128.128.</li>
<li>The AP checks in a per-SSID cache to see if the record requested by the client is cached from a previous DNS lookup.</li>
<li>If the record does exist in the AP’s DNS cache for that SSID, the AP resolves the query locally and responds to the wireless client with the record in a DNS response.</li>
<li>If the record is not in the AP’s DNS cache for that SSID, it queries the local DNS servers that it has been configured to use. The AP will try the primary DNS server first. If the primary DNS server does not respond, a secondary DNS server will be queried, if configured. If neither DNS server responds, a DNS reason code “Reply timed out - The DNS server did not respond within the allotted time frame” message is sent to the client. </li>
<li>When the AP receives a response containing the DNS record from the local DNS server, it caches the results and sends a DNS response to the wireless client.</li>
</ol>
<p><em><strong>*Note:*</strong></em> Cisco Meraki APs can resolve external or internal DNS names depending on the ability of the local DNS servers they are configured to use. The AP only performs DNS recursively. If the recursion bit is not set in the DNS request from the wireless client the AP will not be able to resolve the DNS query.</p>
<p>If it is desirable to have wireless clients use different DNS servers than those configured for the AP itself, <a target="_blank" rel="noopener" href="https://documentation.meraki.com/MR/Client_Addressing_and_Bridging/NAT_Mode_with_Meraki_DHCP#Configuring_Custom_DNS_for_an_SSID_in_NAT_Mode">custom DNS server addresses can be provided</a>. </p>
<h3 id="Configuring-Custom-DNS-for-an-SSID-in-NAT-Mode"><a href="#Configuring-Custom-DNS-for-an-SSID-in-NAT-Mode" class="headerlink" title="Configuring Custom DNS for an SSID in NAT Mode"></a>Configuring Custom DNS for an SSID in NAT Mode</h3><p>This article shows how to set custom DNS servers for a NAT mode SSID, rather than using the AP’s DNS server. This is typically used to forward NAT mode SSID clients to a DNS server with custom content filtering. </p>
<p>To configure custom DNS for an SSID in NAT mode, follow the directions below:</p>
<ol>
<li>Navigate to <em><strong>*Wireless &gt;*</strong></em> <em><strong>*Configure &gt; Access control*</strong></em> in Dashboard</li>
<li>Choose the desired <em><strong>*SSID*</strong></em> from the drop-down menu at the top of the page</li>
<li>Under <em><strong>*Client IP and VLAN*</strong></em>, select <em><strong>*Meraki AP assigned (NAT mode)*</strong></em></li>
<li>For <em><strong>*Custom DNS servers*</strong></em>, enter the preferred custom DNS IP addresses. A maximum of 2 DNS servers can be specified<br><img src="/2025/09/06/SSID-NAT-mode/NAT_mode-1757093526183-5.png" alt="NAT mode configuration "></li>
<li>Click <em><strong>*Save*</strong></em> to apply the settings</li>
</ol>
<p><em><strong>*Note:*</strong></em> Wireless clients will still be assigned the AP’s internal IP 10.128.128.128 as their DNS server IP. This configuration customizes the destination server of the AP’s DNS proxy.</p>
<h2 id="Common-Problems"><a href="#Common-Problems" class="headerlink" title="Common Problems"></a>Common Problems</h2><p>There are a few common problems that can arise when deploying NAT mode with Meraki DHCP to provide client addressing. These problems are outlined in detail below:</p>
<ul>
<li><strong>Roaming -</strong> NAT mode with Meraki DHCP will use the IP address of the AP as the public IP address for wireless clients. When a client roams between APs with Meraki DHCP, TCP connections will drop and have to be re-established. This can cause problems with some applications and devices.</li>
<li><em><strong>*Bonjour and multicasting protocols*</strong></em> - The client isolation features of Meraki DHCP will prevent wireless clients from communicating with each other. This will prevent Bonjour, layer 2 discovery protocols, and multicasting protocols from working. This can cause problems in networks that use Bonjour among wireless clients, or have IP phones or applications that require multicasting.</li>
<li><strong>Group Policy “Security appliance only” settings</strong> - Client information (such as MAC address and IP address) is hidden from an upstream MX due to NAT being performed on a downstream MR. As a result, the MX won’t be able to enforce group policy settings specific to security appliances only for clients connected to an SSID using Meraki DHCP.</li>
<li><em>***<em>*Inbound client connections**</em>*</em>* - NAT mode with Meraki DHCP prevents inbound connections to a wireless client. This can cause problems if a wireless client needs to be accessible from a different network. The image below illustrates this problem. A connection, such as a remote desktop session, from the wired client to wireless client A will fail. Other common examples include failed wireless LAN connections to Chromecast devices, AirPlay enabled devices, printers or projectors.</li>
</ul>
<p><img src="/2025/09/06/SSID-NAT-mode/Example_Topology_withWired.jpeg" alt="img"></p>
<p>The issues described above can be resolved by using <a target="_blank" rel="noopener" href="https://documentation.meraki.com/MR/Client_Addressing_and_Bridging/SSID_Modes_for_Client_IP_Assignment">bridge mode</a> for client addressing. Bridge mode simply passes traffic between the wireless client and wired distribution system. An upstream DHCP server will be required to handle client addressing.</p>
<h2 id="Additional-Resources"><a href="#Additional-Resources" class="headerlink" title="Additional Resources"></a>Additional Resources</h2><p>For additional information about NAT mode with Meraki DHCP and client addressing, please consult the following documentation:</p>
<p><a target="_blank" rel="noopener" href="https://documentation.meraki.com/MR/Client_Addressing_and_Bridging/SSID_Modes_for_Client_IP_Assignment#NAT_Mode">NAT Mode</a></p>
<p><a target="_blank" rel="noopener" href="https://documentation.meraki.com/MR/Client_Addressing_and_Bridging/SSID_Modes_for_Client_IP_Assignment#Bridge_Mode">Bridge Mode</a></p>
<h1 id="NAT-Gateway-Mode-SSID"><a href="#NAT-Gateway-Mode-SSID" class="headerlink" title="NAT Gateway Mode SSID"></a><a target="_blank" rel="noopener" href="https://tip-1.gitbook.io/openwifi/master/configuration-examples/nat-gateway-mode-ssid">NAT Gateway Mode SSID</a></h1><p>Configuring AP as a Gateway</p>
<h3 id="Network-Address-Translation-Wi-Fi-to-Ethernet"><a href="#Network-Address-Translation-Wi-Fi-to-Ethernet" class="headerlink" title="Network Address Translation Wi-Fi to Ethernet"></a>Network Address Translation Wi-Fi to Ethernet</h3><p>When defining an SSID in NAT mode, this has the affect of isolating all SSID virtual interface traffic in Layer 2 and Layer 3 behind a NAT function inside the Access Point. </p>
<p>The Access Point will use its ‘WAN’ interface as the public facing IP address for clients behind the SSID associated to NAT mode operation. </p>
<p>NAT mode SSID will have a local DHCP service enabled by default with an address range of 192.168.1.0&#x2F;24 where the first address is used by the Access Point as the SSID NAT LAN interface serving as default gateway address to all associated UE clients. </p>
<p>NAT SSID is configured within Profiles, SSID Profile:</p>
<ul>
<li>Create a Profile of type SSID</li>
<li>Assign a Profile Name</li>
<li>Create the SSID <ul>
<li>Assign SSID Name</li>
<li>Set related optional SSID parameters</li>
</ul>
</li>
<li>Network Connectivity<ul>
<li>Ensure Mode is set to NAT</li>
</ul>
</li>
</ul>
<p><img src="/2025/09/06/SSID-NAT-mode/nat_gateway_mode_ssid" alt="img"></p>
<p>SSID NAT Configuration</p>
<p>Once the SSID Profile is associated to an Access Point, clients will receive DHCP, Routing, DNS from the Access Point ‘LAN’ side</p>
<p><img src="/2025/09/06/SSID-NAT-mode/nat_gateway_mode_wifi" alt="img"></p>
<p>Client Served via NAT SSID</p>
<h1 id="NEBULA-How-to-use-NAT-mode-on-AP"><a href="#NEBULA-How-to-use-NAT-mode-on-AP" class="headerlink" title="[NEBULA] How to use NAT mode on AP?"></a>[NEBULA] How to use NAT mode on AP?</h1><p><a target="_blank" rel="noopener" href="https://community.zyxel.com/en/discussion/9976/nebula-how-to-use-nat-mode-on-ap">February 2021</a> edited January 2024</p>
<p><strong>Where to find:</strong> Configure &gt; Access point &gt; SSID advanced settings &gt; Traffic options</p>
<p><strong>Function description:</strong> NAT mode is used to have the AP create a DHCP subnet with its own NAT for the SSID. Provide minimum hardware requirement for Wi-Fi of small shop&#x2F;café</p>
<p>If AP management IP address is NOT part of “10.0.0.0&#x2F;8”, SSID subnet becomes “10.0.0.0&#x2F;8”.</p>
<p>If AP management IP address is part of “10.0.0.0&#x2F;8”, SSID subnet becomes “172.16.0.0&#x2F;12”</p>
<p><strong>Scenario:</strong> Enable NAT mode on the SSID which is provided for Guest usage.<br><img src="/2025/09/06/SSID-NAT-mode/8370gld3vff0.png" alt="Image: https:&#x2F;&#x2F;us.v-cdn.net&#x2F;6029482&#x2F;uploads&#x2F;editor&#x2F;bl&#x2F;8370gld3vff0.png"><br>**Configuration:<br>**1. Go to Configure &gt; Access points&gt; SSID settings. Add to SSID as “Wi-Fi”. Then click “Edit”.</p>
<p><img src="/2025/09/06/SSID-NAT-mode/epc3r5mspoki.png" alt="Image: https:&#x2F;&#x2F;us.v-cdn.net&#x2F;6029482&#x2F;uploads&#x2F;editor&#x2F;cl&#x2F;epc3r5mspoki.png"></p>
<p>Or Configure &gt; Access points &gt; SSID advanced settings then select the SSID to continuing the setting.</p>
<ol start="2">
<li>Configure the Traffic options, enable “NAT mode” and click “Back”</li>
</ol>
<p><img src="https://community.zyxel.com/en/discussion/9976/src" alt="img"><img src="/2025/09/06/SSID-NAT-mode/r3gyn0ea56s7.png" alt="img"></p>
<ol start="3">
<li>Click “Save”.</li>
</ol>
<p><img src="/2025/09/06/SSID-NAT-mode/2ucrhkw28sco.png" alt="img"></p>
<p><strong>Successful Log.</strong><br><img src="/2025/09/06/SSID-NAT-mode/cwfcbm3sitw5.png" alt="img"></p>
<p>**Note.<br>**1. The following AP features do not work when NAT mode is on.<br>  a. 802.11r<br>  b. Layer2 isolation<br>  c. Dynamic VLAN (cloud authentication, RADIUS server)</p>
<ol start="2">
<li>When NAT mode is enabled on non-supported models, Nebula CC does not show any error message. And non-supported models disable any SSID with NAT mode enabled.</li>
<li>The IP address lease time is 8 hours.</li>
</ol>
<p>Tagged: </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://community.zyxel.com/en/discussions?tagID=300">Nebula-SSID</a></li>
<li><a target="_blank" rel="noopener" href="https://community.zyxel.com/en/discussions?tagID=309">Nebula-Forwarding Mode</a></li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2025/09/06/SSID-NAT-mode/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-Wi-Fi帧类型与作用详解" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/09/03/Wi-Fi%E5%B8%A7%E7%B1%BB%E5%9E%8B%E4%B8%8E%E4%BD%9C%E7%94%A8%E8%AF%A6%E8%A7%A3/">Wi-Fi帧类型与作用详解</a>
    </h1>
  

        
        <a href="/2025/09/03/Wi-Fi%E5%B8%A7%E7%B1%BB%E5%9E%8B%E4%B8%8E%E4%BD%9C%E7%94%A8%E8%AF%A6%E8%A7%A3/" class="archive-article-date">
  	<time datetime="2025-09-03T12:14:26.321Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2025-09-03</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Wi-Fi帧类型与作用详解"><a href="#Wi-Fi帧类型与作用详解" class="headerlink" title="Wi-Fi帧类型与作用详解"></a>Wi-Fi帧类型与作用详解</h3><table>
<thead>
<tr>
<th align="left">帧类型&#x2F;子类型</th>
<th align="left">过滤器语法</th>
<th align="left">含义与作用</th>
<th align="left">常见性</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Management frame</strong>（管理帧）</td>
<td align="left"><code>wlan.fc.type == 0</code></td>
<td align="left"><strong>作用：</strong> 用于管理和维护STA（工作站）与AP（接入点）之间的通信关系。包括加入&#x2F;离开网络、身份认证、同步等。</td>
<td align="left"><strong>极高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Association request（关联请求）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x00</code></td>
<td align="left">由STA发送给AP，请求正式加入网络。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Association response（关联响应）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x01</code></td>
<td align="left">由AP发送给STA，回应关联请求。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Reassociation request（重关联请求）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x02</code></td>
<td align="left">STA在漫游时发送给新AP，请求切换关联。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Reassociation response（重关联响应）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x03</code></td>
<td align="left">新AP对重关联请求的回应。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Probe request（探测请求）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x04</code></td>
<td align="left">STA主动发送，用于“扫描”周围可用的Wi-Fi网络。</td>
<td align="left"><strong>极高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Probe response（探测响应）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x05</code></td>
<td align="left">AP对探测请求的回复，包含网络信息。</td>
<td align="left"><strong>极高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Timing Advertisement</strong>（定时通告）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x06</code></td>
<td align="left"><strong>补充：</strong> 用于 mesh 网络或定位服务中同步定时信息。</td>
<td align="left"><strong>低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Beacon</strong>（信标帧）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x08</code></td>
<td align="left">AP定期广播，宣告网络的存在。<strong>这是最重要的管理帧之一。</strong></td>
<td align="left"><strong>极高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>ATIM</strong>（通告传输指示消息）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x09</code></td>
<td align="left"><strong>补充：</strong> 在IBSS（自组网&#x2F;Ad-hoc）模式中，用于通知有缓存的数据要发送。</td>
<td align="left"><strong>低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Disassociation（解除关联）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x0A</code></td>
<td align="left">由AP或STA发送，用于终止已建立的关联关系。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Authentication（认证）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x0B</code></td>
<td align="left">STA和AP之间进行身份验证的交换过程。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Deauthentication（解除认证）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x0C</code></td>
<td align="left">终止认证关系，迫使STA重新认证。常用于“取消认证攻击”。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- Action（动作帧）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x0D</code></td>
<td align="left">一个通用的管理帧，用于触发频谱管理、QoS、无线电测量等特定动作。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Action No Ack</strong>（无确认动作帧）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x0E</code></td>
<td align="left"><strong>补充：</strong> 与Action帧相同，但不需要接收方回复确认（ACK）。</td>
<td align="left"><strong>中</strong></td>
</tr>
<tr>
<td align="left"><strong>Control frame</strong>（控制帧）</td>
<td align="left"><code>wlan.fc.type == 1</code></td>
<td align="left"><strong>作用：</strong> 辅助数据帧的传输，用于控制无线介质访问、保证数据可靠性。</td>
<td align="left"><strong>极高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Trigger</strong>（触发帧）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x02</code></td>
<td align="left"><strong>补充 (Wi-Fi 6)：</strong> AP发送此帧调度多个STA同时上行传输（UL MU-MIMO&#x2F;OFDMA），是Wi-Fi 6的关键帧。</td>
<td align="left"><strong>高 (Wi-Fi 6)</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>TACK</strong>（ beamforming 报告轮询）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x03</code></td>
<td align="left"><strong>补充：</strong> 用于轮询beamforming测量报告，现已很少使用。</td>
<td align="left"><strong>极低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Beamforming Report Poll</strong></td>
<td align="left"><code>wlan.fc.type_subtype == 0x04</code></td>
<td align="left"><strong>补充：</strong> 功能与TACK类似，已过时。</td>
<td align="left"><strong>极低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>VHT&#x2F;HE NDP Announcement</strong>（空数据包通告）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x05</code></td>
<td align="left"><strong>补充：</strong> 在发送NDP（空数据包）用于信道测量前发送的通告。</td>
<td align="left"><strong>中</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Control Frame Extension</strong></td>
<td align="left"><code>wlan.fc.type_subtype == 0x06</code></td>
<td align="left"><strong>补充：</strong> 为未来控制帧扩展保留的子类型。</td>
<td align="left"><strong>未使用</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Control Wrapper</strong>（控制封装帧）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x07</code></td>
<td align="left"><strong>补充：</strong> 可以携带其他控制帧或信息。</td>
<td align="left"><strong>低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Block ACK Request</strong>（块确认请求）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x18</code></td>
<td align="left">发送方向接收方请求一个块确认（Block ACK）。</td>
<td align="left"><strong>高 (QoS)</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Block ACK</strong>（块确认）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x19</code></td>
<td align="left">接收方对块确认请求的响应，一次性确认一批数据帧。</td>
<td align="left"><strong>高 (QoS)</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>PS-Poll</strong>（省电轮询）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x1A</code></td>
<td align="left">处于省电模式的STA发送给AP，告知自己已唤醒并准备接收缓存的数据。</td>
<td align="left"><strong>中</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>RTS</strong>（请求发送）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x1B</code></td>
<td align="left">RTS&#x2F;CTS握手的第一步，发送方预约信道使用权。</td>
<td align="left"><strong>中</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>CTS</strong>（清除发送）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x1C</code></td>
<td align="left">RTS&#x2F;CTS握手的第二步，接收方回复CTS让周围设备静默。</td>
<td align="left"><strong>中</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>ACK</strong>（确认）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x1D</code></td>
<td align="left"><strong>最重要的控制帧。</strong> 接收方成功收到数据后立即回复ACK。</td>
<td align="left"><strong>极高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>CF-End</strong>（无竞争周期结束）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x1E</code></td>
<td align="left">宣布无竞争传输阶段（CFP）结束。</td>
<td align="left"><strong>低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>CF-End + CF-Ack</strong></td>
<td align="left"><code>wlan.fc.type_subtype == 0x1F</code></td>
<td align="left"><strong>补充：</strong> 结合了CF-End和ACK功能的帧。</td>
<td align="left"><strong>低</strong></td>
</tr>
<tr>
<td align="left"><strong>Data frame</strong>（数据帧）</td>
<td align="left"><code>wlan.fc.type == 2</code></td>
<td align="left"><strong>作用：</strong> <strong>传输上层协议数据（如IP包）的载体</strong>，是无线通信的最终目的。</td>
<td align="left"><strong>极高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Data</strong>（数据）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x20</code></td>
<td align="left"><strong>补充：</strong> 最基础的、不支持QoS的数据帧。</td>
<td align="left"><strong>中 (旧设备)</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Data + CF-Ack</strong></td>
<td align="left"><code>wlan.fc.type_subtype == 0x21</code></td>
<td align="left"><strong>补充：</strong> 在CFP期间，携带数据的同时对之前收到的帧进行确认。</td>
<td align="left"><strong>极低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Data + CF-Poll</strong></td>
<td align="left"><code>wlan.fc.type_subtype == 0x22</code></td>
<td align="left"><strong>补充：</strong> AP在CFP期间使用，在发送数据的同时轮询STA。</td>
<td align="left"><strong>极低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Data + CF-Ack + CF-Poll</strong></td>
<td align="left"><code>wlan.fc.type_subtype == 0x23</code></td>
<td align="left"><strong>补充：</strong> 结合了数据、确认和轮询三种功能。</td>
<td align="left"><strong>极低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>Null Data</strong>（空数据）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x24</code></td>
<td align="left">不携带任何数据，用于向AP报告电源管理状态。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>QoS Data</strong>（QoS数据）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x28</code></td>
<td align="left"><strong>现代Wi-Fi中最常见的数据帧。</strong> 支持服务质量（QoS）优先级。</td>
<td align="left"><strong>极高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>QoS Data + CF-Ack</strong></td>
<td align="left"><code>wlan.fc.type_subtype == 0x29</code></td>
<td align="left">QoS Data的CFP变体。</td>
<td align="left"><strong>极低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>QoS Data + CF-Poll</strong></td>
<td align="left"><code>wlan.fc.type_subtype == 0x2A</code></td>
<td align="left">QoS Data的CFP变体。</td>
<td align="left"><strong>极低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>QoS Data + CF-Ack + CF-Poll</strong></td>
<td align="left"><code>wlan.fc.type_subtype == 0x2B</code></td>
<td align="left">QoS Data的CFP变体。</td>
<td align="left"><strong>极低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>QoS Null</strong>（空QoS数据）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x2C</code></td>
<td align="left">不携带数据的QoS帧，用于报告QoS网络的电源状态。</td>
<td align="left"><strong>高</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>QoS CF-Poll</strong>（无数据）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x2D</code></td>
<td align="left"><strong>补充：</strong> 仅用于轮询，不携带数据。</td>
<td align="left"><strong>低</strong></td>
</tr>
<tr>
<td align="left">&nbsp;&nbsp;- <strong>QoS CF-Ack + CF-Poll</strong>（无数据）</td>
<td align="left"><code>wlan.fc.type_subtype == 0x2E</code></td>
<td align="left"><strong>补充：</strong> 仅用于确认和轮询，不携带数据。</td>
<td align="left"><strong>低</strong></td>
</tr>
</tbody></table>
<p><strong>总结说明：</strong></p>
<ol>
<li><strong>常见性</strong>：您原始列表中的帧覆盖了<strong>99%</strong> 的常见抓包场景。缺少的主要是一些<strong>已过时</strong>（如CFP相关帧）或<strong>为未来保留</strong>的帧。</li>
<li><strong>重要补充</strong>：唯一一个常见且重要的补充是 <strong>Trigger帧</strong>，它是Wi-Fi 6（802.11ax）中实现高效上行多用户传输的核心机制。</li>
<li><strong>扩展类型</strong>：<code>0x0E</code> (Action No Ack), <code>0x06</code> (Timing Advertisement) 等在特定网络或功能中会出现，但日常分析中不常见。</li>
</ol>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2025/09/03/Wi-Fi%E5%B8%A7%E7%B1%BB%E5%9E%8B%E4%B8%8E%E4%BD%9C%E7%94%A8%E8%AF%A6%E8%A7%A3/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-icmp_counter" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/08/21/icmp_counter/">netfilter过滤ICMP包</a>
    </h1>
  

        
        <a href="/2025/08/21/icmp_counter/" class="archive-article-date">
  	<time datetime="2025-08-21T15:38:02.002Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2025-08-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="netfilter过滤ICMP包"><a href="#netfilter过滤ICMP包" class="headerlink" title="netfilter过滤ICMP包"></a>netfilter过滤ICMP包</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/module.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/kernel.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/ip.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/icmp.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/netfilter.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/netfilter_ipv4.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/proc_fs.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/seq_file.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/jiffies.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/timekeeping.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/spinlock.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/slab.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;linux/version.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MODULE_NAME <span class="string">&quot;icmp_logger&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TARGET_LENGTH 64  <span class="comment">// 目标ICMP包长度(字节)</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_ENTRIES 1000  <span class="comment">// 最大记录条数</span></span></span><br><span class="line"> </span><br><span class="line">MODULE_LICENSE(<span class="string">&quot;GPL&quot;</span>);</span><br><span class="line">MODULE_AUTHOR(<span class="string">&quot;YourName&quot;</span>);</span><br><span class="line">MODULE_DESCRIPTION(<span class="string">&quot;ICMP Packet Logger with Timestamp and Source IP&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ICMP记录结构体</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">icmp_record</span> &#123;</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> seq;        <span class="comment">// 序号</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">timespec64</span> <span class="title">ts</span>;</span>    <span class="comment">// 时间戳 </span></span><br><span class="line">    __be32 src_ip;           <span class="comment">// 源IP(网络字节序)</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">list_head</span> <span class="title">list</span>;</span>   <span class="comment">// 链表节点</span></span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="type">static</span> <span class="title function_">LIST_HEAD</span><span class="params">(icmp_list)</span>;       <span class="comment">// ICMP记录链表</span></span><br><span class="line"><span class="type">static</span> <span class="title function_">DEFINE_SPINLOCK</span><span class="params">(list_lock)</span>; <span class="comment">// 链表自旋锁 </span></span><br><span class="line"><span class="type">static</span> <span class="type">atomic_t</span> icmp_counter = ATOMIC_INIT(<span class="number">0</span>); <span class="comment">// 全局计数器 </span></span><br><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">int</span> next_seq = <span class="number">1</span>;  <span class="comment">// 下一个序号 </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Netfilter钩子函数</span></span><br><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">icmp_logger_hook</span><span class="params">(<span class="type">void</span> *priv, <span class="keyword">struct</span> sk_buff *skb,</span></span><br><span class="line"><span class="params">                                     <span class="type">const</span> <span class="keyword">struct</span> nf_hook_state *state)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">iphdr</span> *<span class="title">ip_header</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">icmphdr</span> *<span class="title">icmp_header</span>;</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> total_length;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">icmp_record</span> *<span class="title">new_rec</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">timespec64</span> <span class="title">now</span>;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!skb) <span class="keyword">return</span> NF_ACCEPT;</span><br><span class="line">    </span><br><span class="line">    ip_header = ip_hdr(skb);</span><br><span class="line">    <span class="keyword">if</span> (!ip_header || ip_header-&gt;protocol != IPPROTO_ICMP)</span><br><span class="line">        <span class="keyword">return</span> NF_ACCEPT;</span><br><span class="line">    </span><br><span class="line">    icmp_header = icmp_hdr(skb);</span><br><span class="line">    <span class="keyword">if</span> (!icmp_header) <span class="keyword">return</span> NF_ACCEPT;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*total_length = ntohs(ip_header-&gt;tot_len);</span></span><br><span class="line"><span class="comment">    if (total_length != TARGET_LENGTH) </span></span><br><span class="line"><span class="comment">        return NF_ACCEPT;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">// 创建新记录</span></span><br><span class="line">    new_rec = kmalloc(<span class="keyword">sizeof</span>(*new_rec), GFP_ATOMIC);</span><br><span class="line">    <span class="keyword">if</span> (!new_rec) <span class="keyword">return</span> NF_ACCEPT;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 填充记录数据 </span></span><br><span class="line">    ktime_get_real_ts64(&amp;now);</span><br><span class="line">    new_rec-&gt;seq = next_seq++;</span><br><span class="line">    new_rec-&gt;ts = now;</span><br><span class="line">    new_rec-&gt;src_ip = ip_header-&gt;saddr;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 加锁并添加到链表 </span></span><br><span class="line">    spin_lock(&amp;list_lock);</span><br><span class="line">    list_add_tail(&amp;new_rec-&gt;<span class="built_in">list</span>, &amp;icmp_list);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 维护最大记录数 </span></span><br><span class="line">    <span class="keyword">if</span> (atomic_inc_return(&amp;icmp_counter) &gt; MAX_ENTRIES) &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">icmp_record</span> *<span class="title">old</span> =</span> list_first_entry(&amp;icmp_list, </span><br><span class="line">                                <span class="keyword">struct</span> icmp_record, <span class="built_in">list</span>);</span><br><span class="line">        list_del(&amp;old-&gt;<span class="built_in">list</span>);</span><br><span class="line">        kfree(old);</span><br><span class="line">        <span class="type">atomic_dec</span>(&amp;icmp_counter);</span><br><span class="line">    &#125;</span><br><span class="line">    spin_unlock(&amp;list_lock);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> NF_ACCEPT;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// /proc文件显示函数 </span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">icmp_proc_show</span><span class="params">(<span class="keyword">struct</span> seq_file *m, <span class="type">void</span> *v)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">icmp_record</span> *<span class="title">entry</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">tm</span> <span class="title">tm</span>;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 表头</span></span><br><span class="line">    seq_printf(m, <span class="string">&quot;%-8s%-25s%-15s\n&quot;</span>, <span class="string">&quot;序号&quot;</span>, <span class="string">&quot;时间&quot;</span>, <span class="string">&quot;源IP&quot;</span>);</span><br><span class="line">    seq_printf(m, <span class="string">&quot;--------------------------------------------\n&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    spin_lock(&amp;list_lock);</span><br><span class="line">    list_for_each_entry(entry, &amp;icmp_list, <span class="built_in">list</span>) &#123;</span><br><span class="line">        time64_to_tm(entry-&gt;ts.tv_sec,  <span class="number">0</span>, &amp;tm);</span><br><span class="line">        seq_printf(m, <span class="string">&quot;%-8d%04d/%02d/%02d-%02d:%02d:%02d.%02ld\t%pI4\n&quot;</span>, </span><br><span class="line">                   entry-&gt;seq,</span><br><span class="line">                   tm.tm_year  + <span class="number">1900</span>, tm.tm_mon  + <span class="number">1</span>, tm.tm_mday, </span><br><span class="line">                   tm.tm_hour,  tm.tm_min,  tm.tm_sec, </span><br><span class="line">                   entry-&gt;ts.tv_nsec  / <span class="number">10000000</span>,  <span class="comment">// 转换为百分之一秒</span></span><br><span class="line">                   &amp;entry-&gt;src_ip);</span><br><span class="line">    &#125;</span><br><span class="line">    spin_unlock(&amp;list_lock);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// /proc文件打开操作 </span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">icmp_proc_open</span><span class="params">(<span class="keyword">struct</span> inode *inode, <span class="keyword">struct</span> file *file)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> single_open(file, icmp_proc_show, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">proc_ops</span> <span class="title">icmp_proc_ops</span> =</span> &#123;</span><br><span class="line">    .proc_open = icmp_proc_open,</span><br><span class="line">    .proc_read = seq_read,</span><br><span class="line">    .proc_lseek = seq_lseek,</span><br><span class="line">    .proc_release = single_release,</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Netfilter钩子结构 </span></span><br><span class="line"><span class="type">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">nf_hook_ops</span> <span class="title">nfho</span> =</span> &#123;</span><br><span class="line">    .hook = icmp_logger_hook,</span><br><span class="line">    .pf = NFPROTO_IPV4,</span><br><span class="line">    .hooknum = NF_INET_PRE_ROUTING,</span><br><span class="line">    .priority = NF_IP_PRI_FIRST,</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="type">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">proc_dir_entry</span> *<span class="title">proc_entry</span>;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 模块初始化 </span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> __init <span class="title function_">icmp_logger_init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 注册Netfilter钩子</span></span><br><span class="line">    <span class="keyword">if</span> (nf_register_net_hook(&amp;init_net, &amp;nfho)) &#123;</span><br><span class="line">        printk(KERN_ERR <span class="string">&quot;%s: Failed to register hook\n&quot;</span>, MODULE_NAME);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建/proc文件</span></span><br><span class="line">    proc_entry = proc_create(<span class="string">&quot;icmp_log&quot;</span>, <span class="number">0</span>, <span class="literal">NULL</span>, &amp;icmp_proc_ops);</span><br><span class="line">    <span class="keyword">if</span> (!proc_entry) &#123;</span><br><span class="line">        nf_unregister_net_hook(&amp;init_net, &amp;nfho);</span><br><span class="line">        printk(KERN_ERR <span class="string">&quot;%s: Failed to create /proc entry\n&quot;</span>, MODULE_NAME);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    printk(KERN_INFO <span class="string">&quot;%s: Module loaded\n&quot;</span>, MODULE_NAME);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 模块退出 </span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> __exit <span class="title function_">icmp_logger_exit</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">icmp_record</span> *<span class="title">entry</span>, *<span class="title">tmp</span>;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 清理链表 </span></span><br><span class="line">    spin_lock(&amp;list_lock);</span><br><span class="line">    list_for_each_entry_safe(entry, tmp, &amp;icmp_list, <span class="built_in">list</span>) &#123;</span><br><span class="line">        list_del(&amp;entry-&gt;<span class="built_in">list</span>);</span><br><span class="line">        kfree(entry);</span><br><span class="line">    &#125;</span><br><span class="line">    spin_unlock(&amp;list_lock);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 注销/proc文件和Netfilter钩子</span></span><br><span class="line">    <span class="keyword">if</span> (proc_entry) proc_remove(proc_entry);</span><br><span class="line">    nf_unregister_net_hook(&amp;init_net, &amp;nfho);</span><br><span class="line">    </span><br><span class="line">    printk(KERN_INFO <span class="string">&quot;%s: Module unloaded\n&quot;</span>, MODULE_NAME);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">module_init(icmp_logger_init);</span><br><span class="line">module_exit(icmp_logger_exit);</span><br></pre></td></tr></table></figure>





<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">obj-m += icmp_counter.o </span><br><span class="line"> </span><br><span class="line"><span class="section">all:</span></span><br><span class="line">	make -C /lib/modules/<span class="variable">$(<span class="built_in">shell</span> uname -r)</span>/build M=<span class="variable">$(PWD)</span> modules</span><br><span class="line"> </span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	make -C /lib/modules/<span class="variable">$(<span class="built_in">shell</span> uname -r)</span>/build M=<span class="variable">$(PWD)</span> clean</span><br></pre></td></tr></table></figure>


      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2025/08/21/icmp_counter/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-如何搭建hexo博客" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/08/21/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2/">hexo博客搭建</a>
    </h1>
  

        
        <a href="/2025/08/21/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2/" class="archive-article-date">
  	<time datetime="2025-08-21T15:37:10.395Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2025-08-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="hexo博客搭建"><a href="#hexo博客搭建" class="headerlink" title="hexo博客搭建"></a>hexo博客搭建</h1><h3 id="预先准备"><a href="#预先准备" class="headerlink" title="预先准备"></a>预先准备</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install git nodejs npm</span><br><span class="line">git config --global user.name name</span><br><span class="line">git config --global user.email email</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-g 参数全局安装 hexo-cli 包，这将允许您在您选择的任何目录中安装 Hexo 博客</span></span><br><span class="line">npm install hexo-cli -g</span><br><span class="line">npm install hexo -g</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn/download">Node.js — Download Node.js®</a>推荐使用nvm安装，apt仓库的版本太低了，后面hexo服务器可能无法正常启动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Download and install nvm:</span><br><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash</span><br><span class="line"></span><br><span class="line"># in lieu of restarting the shell</span><br><span class="line">\. &quot;$HOME/.nvm/nvm.sh&quot;</span><br><span class="line"></span><br><span class="line"># Download and install Node.js:</span><br><span class="line">nvm install 22</span><br><span class="line"></span><br><span class="line"># Verify the Node.js version:</span><br><span class="line">node -v # Should print &quot;v22.18.0&quot;.</span><br><span class="line">nvm current # Should print &quot;v22.18.0&quot;.</span><br><span class="line"></span><br><span class="line"># Verify npm version:</span><br><span class="line">npm -v # Should print &quot;10.9.3&quot;.</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="开始hexo"><a href="#开始hexo" class="headerlink" title="开始hexo"></a>开始hexo</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 进入预先准备的目录后进行初始化</span><br><span class="line">hexo init</span><br><span class="line"></span><br><span class="line"># 安装依赖</span><br><span class="line">npm install</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Hexo操作"><a href="#Hexo操作" class="headerlink" title="Hexo操作"></a>Hexo操作</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g #generate 生成静态文件</span><br><span class="line">$ hexo s #server 启动服务器。</span><br><span class="line">// 默认情况下，访问网址为： [http://localhost:4000/]</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="将git库和hexo链接起来"><a href="#将git库和hexo链接起来" class="headerlink" title="将git库和hexo链接起来"></a>将git库和hexo链接起来</h3><p>配置Deployment</p>
<p>在hexo文件夹中，找到_config.yml文件，修改repository值（在末尾），repository值是github项目里的ssh；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:My/My.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<p>HexoBlog部署到git，需要安装hexo-deployer-git插件，在blog目录下运行以下命令进行安装；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line">npm WARN babel-eslint@10.1.0 requires a peer of eslint@&gt;= 4.12.1 but none is </span><br><span class="line">installed. You must install peer dependencies yourself.</span><br><span class="line"></span><br><span class="line">+ hexo-deployer-git@1.0.0</span><br><span class="line">added 1 package from 1 contributor, removed 4 packages and updated 14 packages in </span><br><span class="line">5.684s</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改根目录下_config.yml文件后，需要使用$ hexo deploy部署一下，否则修改内容不会生效；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<h1 id="坏了"><a href="#坏了" class="headerlink" title="坏了"></a>坏了</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请确认您有正确的访问权限并且仓库存在。</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">Error: Spawn failed</span><br><span class="line">    at ChildProcess.&lt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kkhm@vm:~/samba/hexo$ ls -a</span><br><span class="line">.   _config.landscape.yml  db.json      .github     node_modules  package-lock.json  scaffolds  themes</span><br><span class="line">..  _config.yml            .deploy_git  .gitignore  package.json  public             source</span><br></pre></td></tr></table></figure>

<p>删除.deploy_git与public</p>
<p>然后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>


      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2025/08/21/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-hello-world" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/08/21/hello-world/">Hello World</a>
    </h1>
  

        
        <a href="/2025/08/21/hello-world/" class="archive-article-date">
  	<time datetime="2025-08-21T15:11:17.205Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2025-08-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2025/08/21/hello-world/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2025 John Doe
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
<script src="/js/code-copy.js"></script>

    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};n.m=t,n.c=r,n.p="./",n(0)}([function(t,n,r){r(195),t.exports=r(191)},function(t,n,r){var e=r(3),i=r(52),o=r(27),u=r(28),c=r(53),f="prototype",a=function(t,n,r){var s,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,b=t&a.B,m=d?e:y?e[n]||(e[n]={}):(e[n]||{})[f],x=d?i:i[n]||(i[n]={}),w=x[f]||(x[f]={});d&&(r=n);for(s in r)l=!p&&m&&void 0!==m[s],h=(l?m:r)[s],v=b&&l?c(h,e):g&&"function"==typeof h?c(Function.call,h):h,m&&u(m,s,h,t&a.U),x[s]!=h&&o(x,s,v),g&&w[s]!=h&&(w[s]=h)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(6);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(126)("wks"),i=r(76),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(94),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(167),o=r(50),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(58),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(5).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(67),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(46);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(63),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(11),i=r(66);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(3),i=r(27),o=r(24),u=r(76)("src"),c="toString",f=Function[c],a=(""+f).split(c);r(52).inspectSource=function(t){return f.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[u]||f.call(this)})},function(t,n,r){var e=r(1),i=r(4),o=r(46),u=function(t,n,r,e){var i=String(o(t)),u="<"+n;return""!==r&&(u+=" "+r+'="'+String(e).replace(/"/g,"&quot;")+'"'),u+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(u),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(115),i=r(46);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(116),i=r(66),o=r(30),u=r(50),c=r(24),f=r(167),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(24),i=r(17),o=r(145)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(15)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(5),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(21);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(15)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(53),i=r(115),o=r(17),u=r(16),c=r(203);t.exports=function(t,n){var r=1==t,f=2==t,a=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),b=i(g),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):f?v(n,0):void 0;x>w;w++)if((h||w in b)&&(d=b[w],y=m(d,w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:a||s?s:S}}},function(t,n,r){var e=r(1),i=r(52),o=r(4);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(6);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(91),u=r(13),c="prototype",f=function(t,n,r){var a,s,l,h=t&f.F,v=t&f.G,p=t&f.S,d=t&f.P,y=t&f.B,g=t&f.W,b=v?i:i[n]||(i[n]={}),m=b[c],x=v?e:p?e[n]:(e[n]||{})[c];v&&(r=n);for(a in r)(s=!h&&x&&void 0!==x[a])&&a in b||(l=s?x[a]:r[a],b[a]=v&&"function"!=typeof x[a]?r[a]:y&&s?o(l,e):g&&x[a]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n[c]=t[c],n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&f.R&&m&&!m[a]&&u(m,a,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(26);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(183),i=r(1),o=r(126)("metadata"),u=o.store||(o.store=new(r(186))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},f=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},a=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};t.exports={store:u,map:c,has:f,get:a,set:s,keys:l,key:h,exp:v}},function(t,n,r){"use strict";if(r(10)){var e=r(69),i=r(3),o=r(4),u=r(1),c=r(127),f=r(152),a=r(53),s=r(68),l=r(66),h=r(27),v=r(73),p=r(67),d=r(16),y=r(75),g=r(50),b=r(24),m=r(180),x=r(114),w=r(6),S=r(17),_=r(137),O=r(70),E=r(32),P=r(71).f,j=r(154),F=r(76),M=r(7),A=r(48),N=r(117),T=r(146),I=r(155),k=r(80),L=r(123),R=r(74),C=r(130),D=r(160),U=r(11),W=r(31),G=U.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K="ArrayBuffer",J="Shared"+K,Y="BYTES_PER_ELEMENT",H="prototype",$=Array[H],X=f.ArrayBuffer,Q=f.DataView,Z=A(0),tt=A(2),nt=A(3),rt=A(4),et=A(5),it=A(6),ot=N(!0),ut=N(!1),ct=I.values,ft=I.keys,at=I.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,bt=M("iterator"),mt=M("toStringTag"),xt=F("typed_constructor"),wt=F("def_constructor"),St=c.CONSTR,_t=c.TYPED,Ot=c.VIEW,Et="Wrong length!",Pt=A(1,function(t,n){return Tt(T(t,t[wt]),n)}),jt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ft=!!q&&!!q[H].set&&o(function(){new q(1).set({})}),Mt=function(t,n){if(void 0===t)throw z(Et);var r=+t,e=d(t);if(n&&!m(r,e))throw V(Et);return e},At=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Nt=function(t){if(w(t)&&_t in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&xt in t))throw z("It is not a typed array constructor!");return new t(n)},It=function(t,n){return kt(T(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Tt(t,e);e>r;)i[r]=n[r++];return i},Lt=function(t,n,r){G(t,n,{get:function(){return this._d[r]}})},Rt=function(t){var n,r,e,i,o,u,c=S(t),f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,h=j(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&f>2&&(s=a(s,arguments[2],2)),n=0,r=d(c.length),i=Tt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},Ct=function(){for(var t=0,n=arguments.length,r=Tt(this,n);n>t;)r[t]=arguments[t++];return r},Dt=!!q&&o(function(){gt.call(new q(1))}),Ut=function(){return gt.apply(Dt?dt.call(Nt(this)):Nt(this),arguments)},Wt={copyWithin:function(t,n){return D.call(Nt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return C.apply(Nt(this),arguments)},filter:function(t){return It(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(Nt(this),arguments)},lastIndexOf:function(t){return st.apply(Nt(this),arguments)},map:function(t){return Pt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,n=this,r=Nt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Nt(this),t)},subarray:function(t,n){var r=Nt(this),e=r.length,i=y(t,e);return new(T(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},Gt=function(t,n){return It(this,dt.call(Nt(this),t,n))},Bt=function(t){Nt(this);var n=At(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw V(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(Nt(this))},keys:function(){return ft.call(Nt(this))},values:function(){return ct.call(Nt(this))}},zt=function(t,n){return w(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return zt(t,n=g(n,!0))?l(2,t[n]):B(t,n)},Kt=function(t,n,r){return!(zt(t,n=g(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,n,r):(t[n]=r.value,t)};St||(W.f=qt,U.f=Kt),u(u.S+u.F*!St,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Kt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Jt=v({},Wt);v(Jt,Vt),h(Jt,bt,Vt.values),v(Jt,{slice:Gt,set:Bt,constructor:function(){},toString:yt,toLocaleString:Ut}),Lt(Jt,"buffer","b"),Lt(Jt,"byteOffset","o"),Lt(Jt,"byteLength","l"),Lt(Jt,"length","e"),G(Jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,n,r,f){f=!!f;var a=t+(f?"Clamped":"")+"Array",l="Uint8Array"!=a,v="get"+t,p="set"+t,y=i[a],g=y||{},b=y&&E(y),m=!y||!c.ABV,S={},_=y&&y[H],j=function(t,r){var e=t._d;return e.v[v](r*n+e.o,jt)},F=function(t,r,e){var i=t._d;f&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[p](r*n+i.o,e,jt)},M=function(t,n){G(t,n,{get:function(){return j(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};m?(y=r(function(t,r,e,i){s(t,y,a,"_d");var o,u,c,f,l=0,v=0;if(w(r)){if(!(r instanceof X||(f=x(r))==K||f==J))return _t in r?kt(y,r):Rt.call(y,r);o=r,v=At(e,n);var p=r.byteLength;if(void 0===i){if(p%n)throw V(Et);if((u=p-v)<0)throw V(Et)}else if((u=d(i)*n)+v>p)throw V(Et);c=u/n}else c=Mt(r,!0),u=c*n,o=new X(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new Q(o)});l<c;)M(t,l++)}),_=y[H]=O(Jt),h(_,"constructor",y)):L(function(t){new y(null),new y(t)},!0)||(y=r(function(t,r,e,i){s(t,y,a);var o;return w(r)?r instanceof X||(o=x(r))==K||o==J?void 0!==i?new g(r,At(e,n),i):void 0!==e?new g(r,At(e,n)):new g(r):_t in r?kt(y,r):Rt.call(y,r):new g(Mt(r,l))}),Z(b!==Function.prototype?P(g).concat(P(b)):P(g),function(t){t in y||h(y,t,g[t])}),y[H]=_,e||(_.constructor=y));var A=_[bt],N=!!A&&("values"==A.name||void 0==A.name),T=Vt.values;h(y,xt,!0),h(_,_t,a),h(_,Ot,!0),h(_,wt,y),(f?new y(1)[mt]==a:mt in _)||G(_,mt,{get:function(){return a}}),S[a]=y,u(u.G+u.W+u.F*(y!=g),S),u(u.S,a,{BYTES_PER_ELEMENT:n,from:Rt,of:Ct}),Y in _||h(_,Y,n),u(u.P,a,Wt),R(a),u(u.P+u.F*Ft,a,{set:Bt}),u(u.P+u.F*!N,a,Vt),u(u.P+u.F*(_.toString!=yt),a,{toString:yt}),u(u.P+u.F*o(function(){new y(1).slice()}),a,{slice:Gt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),a,{toLocaleString:Ut}),k[a]=N?A:T,e||N||h(_,bt,T)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(5).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var e=r(36),i=r(51),o=r(64),u=r(13),c=r(8),f=r(35),a=r(96),s=r(38),l=r(103),h=r(15)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n,r){var e=r(20),i=r(100),o=r(34),u=r(39)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(57)("iframe"),e=o.length;for(n.style.display="none",r(93).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(63),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(8),i=r(9),o=r(90)(!1),u=r(39)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(76)("meta"),i=r(6),o=r(24),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(2),i=r(173),o=r(133),u=r(145)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(132)("iframe"),e=o.length;for(n.style.display="none",r(135).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(175),i=r(133).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(175),i=r(133);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(28);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(67),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;void 0==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(53),i=r(169),o=r(137),u=r(2),c=r(16),f=r(154),a={},s={},n=t.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:f(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>m;m++)if((y=n?b(u(p=t[m])[0],p[1]):b(t[m]))===a||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,b,p.value,n))===a||y===s)return y};n.BREAK=a,n.RETURN=s},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(24),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(1),i=r(46),o=r(4),u=r(150),c="["+u+"]",f="​",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||f[t]()!=f}),a=i[t]=c?n(h):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n,r){t.exports={default:r(86),__esModule:!0}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(84),o=e(i),u=r(83),c=e(u),f="function"==typeof c.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":typeof t};n.default="function"==typeof c.default&&"symbol"===f(o.default)?function(t){return void 0===t?"undefined":f(t)}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":void 0===t?"undefined":f(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(25).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(9),i=r(106),o=r(105);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(88);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(19),i=r(62),o=r(37);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){t.exports=r(5).document&&document.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(60),i=r(22),o=r(38),u={};r(13)(u,r(15)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(19),i=r(9);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,r){var e=r(14),i=r(20),o=r(19);t.exports=r(12)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(9),u=r(42),c=r(8),f=r(58),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(9),i=r(61).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(77),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(41),i=r(33);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(89),i=r(97),o=r(35),u=r(9);t.exports=r(59)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(5),i=r(8),o=r(12),u=r(51),c=r(64),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(15),p=r(44),d=r(43),y=r(98),g=r(92),b=r(95),m=r(20),x=r(9),w=r(42),S=r(22),_=r(60),O=r(102),E=r(101),P=r(14),j=r(19),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(61).f=O.f=Z,r(37).f=X,r(62).f=tt,o&&!r(36)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(13)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(5),i=r(13),o=r(35),u=r(15)("toStringTag"),c=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var e=r(45),i=r(7)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(30),i=r(16),o=r(75);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){"use strict";var e=r(3),i=r(1),o=r(28),u=r(73),c=r(65),f=r(79),a=r(68),s=r(6),l=r(4),h=r(123),v=r(81),p=r(136);t.exports=function(t,n,r,d,y,g){var b=e[t],m=b,x=y?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var O=new m,E=O[x](g?{}:-0,1)!=O,P=l(function(){O.has(1)}),j=h(function(t){new m(t)}),F=!g&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});j||(m=n(function(n,r){a(n,m,t);var e=p(new b,n,m);return void 0!=r&&f(r,y,e[x],e),e}),m.prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||E)&&_(x),g&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,y,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),g||d.setStrong(m,t,y),m}},function(t,n,r){"use strict";var e=r(27),i=r(28),o=r(4),u=r(46),c=r(7);t.exports=function(t,n,r){var f=c(t),a=r(u,f,""[t]),s=a[0],l=a[1];o(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,f,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}
},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(6),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(7)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){t.exports=r(69)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(76),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:-1==t.indexOf("MicroMessenger")}}()};t.exports=r},function(t,n,r){"use strict";var e=r(85),i=function(t){return t&&t.__esModule?t:{default:t}}(e),o=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):r[t]||t}function n(t){return e[t]}var r={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},e={};for(var u in r)e[r[u]]=u;return r["&apos;"]="'",e["'"]="&#39;",{encode:function(t){return t?(""+t).replace(/['<> "&]/g,n).replace(/\r?\n/g,"<br/>").replace(/\s/g,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(/<br\s*\/?>/gi,"\n").replace(/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,t).replace(/\u00a0/g," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)t[n]=o.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,i.default)(t)))for(var e in t)t[e]=o.encodeObject(t[e]);else if("string"==typeof t)return o.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=o},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),f=u>2?arguments[2]:void 0,a=void 0===f?r:i(f,r);a>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(11),i=r(66);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(6),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){t.exports=r(3).document&&document.documentElement},function(t,n,r){var e=r(6),i=r(144).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(70),i=r(66),o=r(81),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(69),i=r(1),o=r(28),u=r(27),c=r(24),f=r(80),a=r(139),s=r(81),l=r(32),h=r(7)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var e=r(3),i=r(151).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,f="process"==r(45)(u);t.exports=function(){var t,n,r,a=function(){var e,i;for(f&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(f)r=function(){u.nextTick(a)};else if(o){var s=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(a)}}else r=function(){i.call(e,a)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){var e=r(6),i=r(2),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{e=r(53)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),e(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(126)("keys"),i=r(76);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(2),i=r(26),o=r(7)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(67),i=r(46);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(122),i=r(46);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var e=r(67),i=r(46);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(53),c=r(121),f=r(135),a=r(132),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++d]=function(){c("function"==typeof t?t:Function(t),n)},e(d),d},v=function(t){delete y[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=g in a("script")?function(t){f.appendChild(a("script"))[g]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(69),u=r(127),c=r(27),f=r(73),a=r(4),s=r(68),l=r(67),h=r(16),v=r(71).f,p=r(11).f,d=r(130),y=r(81),g="ArrayBuffer",b="DataView",m="prototype",x="Wrong length!",w="Wrong index!",S=e[g],_=e[b],O=e.Math,E=e.RangeError,P=e.Infinity,j=S,F=O.abs,M=O.pow,A=O.floor,N=O.log,T=O.LN2,I="buffer",k="byteLength",L="byteOffset",R=i?"_b":I,C=i?"_l":k,D=i?"_o":L,U=function(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=F(t),t!=t||t===P?(i=t!=t?1:0,e=f):(e=A(N(t)/T),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+a>=1?s/o:s*M(2,1-a),t*o>=2&&(e++,o/=2),e+a>=f?(i=0,e=f):e+a>=1?(i=(t*o-1)*M(2,n),e+=a):(i=t*M(2,a-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u},W=function(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;c>0;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-P:P;e+=M(2,n),s-=u}return(a?-1:1)*e*M(2,s-n)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return U(t,52,8)},K=function(t){return U(t,23,4)},J=function(t,n,r){p(t[m],n,{get:function(){return this[r]}})},Y=function(t,n,r,e){var i=+r,o=l(i);if(i!=o||o<0||o+n>t[C])throw E(w);var u=t[R]._b,c=o+t[D],f=u.slice(c,c+n);return e?f:f.reverse()},H=function(t,n,r,e,i,o){var u=+r,c=l(u);if(u!=c||c<0||c+n>t[C])throw E(w);for(var f=t[R]._b,a=c+t[D],s=e(+i),h=0;h<n;h++)f[a+h]=s[o?h:n-h-1]},$=function(t,n){s(t,S,g);var r=+n,e=h(r);if(r!=e)throw E(x);return e};if(u.ABV){if(!a(function(){new S})||!a(function(){new S(.5)})){S=function(t){return new j($(this,t))};for(var X,Q=S[m]=j[m],Z=v(j),tt=0;Z.length>tt;)(X=Z[tt++])in S||c(S,X,j[X]);o||(Q.constructor=S)}var nt=new _(new S(2)),rt=_[m].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||f(_[m],{setInt8:function(t,n){rt.call(this,t,n<<24>>24)},setUint8:function(t,n){rt.call(this,t,n<<24>>24)}},!0)}else S=function(t){var n=$(this,t);this._b=d.call(Array(n),0),this[C]=n},_=function(t,n,r){s(this,_,b),s(t,S,b);var e=t[C],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw E(x);this[R]=t,this[D]=i,this[C]=r},i&&(J(S,k,"_l"),J(_,I,"_b"),J(_,k,"_l"),J(_,L,"_o")),f(_[m],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var n=Y(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Y(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return G(Y(this,4,t,arguments[1]))},getUint32:function(t){return G(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return W(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return W(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){H(this,1,t,B,n)},setUint8:function(t,n){H(this,1,t,B,n)},setInt16:function(t,n){H(this,2,t,V,n,arguments[2])},setUint16:function(t,n){H(this,2,t,V,n,arguments[2])},setInt32:function(t,n){H(this,4,t,z,n,arguments[2])},setUint32:function(t,n){H(this,4,t,z,n,arguments[2])},setFloat32:function(t,n){H(this,4,t,K,n,arguments[2])},setFloat64:function(t,n){H(this,8,t,q,n,arguments[2])}});y(S,g),y(_,b),c(_[m],u.VIEW,!0),n[g]=S,n[b]=_},function(t,n,r){var e=r(3),i=r(52),o=r(69),u=r(182),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(52).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(78),i=r(170),o=r(80),u=r(30);t.exports=r(140)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){function r(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=r},function(t,n){function r(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}t.exports=r},function(t,n){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}function u(){d&&v&&(d=!1,v.length?p=v.concat(p):y=-1,p.length&&c())}function c(){if(!d){var t=i(u);d=!0;for(var n=p.length;n;){for(v=p,p=[];++y<n;)v&&v[y].run();y=-1,n=p.length}v=null,d=!1,o(t)}}function f(t,n){this.fun=t,this.array=n}function a(){}var s,l,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var v,p=[],d=!1,y=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.push(new f(t,n)),1!==p.length||d||i(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),f=i(n,u),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?u:i(a,u))-f,u-c),l=1;for(f<c&&c<f+s&&(l=-1,f+=s-1,c+=s-1);s-- >0;)f in r?r[c]=r[f]:delete r[c],c+=l,f+=l;return r}},function(t,n,r){var e=r(79);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var e=r(26),i=r(17),o=r(115),u=r(16);t.exports=function(t,n,r,c,f){e(n);var a=i(t),s=o(a),l=u(a.length),h=f?l-1:0,v=f?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,f?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;f?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,a));return c}},function(t,n,r){"use strict";var e=r(26),i=r(6),o=r(121),u=[].slice,c={},f=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?f(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n,r){"use strict";var e=r(11).f,i=r(70),o=r(73),u=r(53),c=r(68),f=r(46),a=r(79),s=r(140),l=r(170),h=r(74),v=r(10),p=r(65).fastKey,d=v?"_s":"size",y=function(t,n){var r,e=p(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,s){var l=t(function(t,e){c(t,l,n,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[s],t)});return o(l.prototype,{clear:function(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=this,r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){c(this,l,"forEach");for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(this,t)}}),v&&e(l.prototype,"size",{get:function(){return f(this[d])}}),l},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){s(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?l(0,r.k):"values"==n?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),h(n)}}},function(t,n,r){var e=r(114),i=r(161);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var e=r(73),i=r(65).getWeak,o=r(2),u=r(6),c=r(68),f=r(79),a=r(48),s=r(24),l=a(5),h=a(6),v=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,n){return l(t.a,function(t){return t[0]===n})};d.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=h(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var a=t(function(t,e){c(t,a,n,"_i"),t._i=v++,t._l=void 0,void 0!=e&&f(e,r,t[o],t)});return e(a.prototype,{delete:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).delete(t):n&&s(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).has(t):n&&s(n,this._i)}}),a},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(132)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(6),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var e=r(2);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(72),i=r(125),o=r(116),u=r(17),c=r(115),f=Object.assign;t.exports=!f||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=i.f,l=o.f;f>a;)for(var h,v=c(arguments[a++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:f},function(t,n,r){var e=r(11),i=r(2),o=r(72);t.exports=r(10)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(30),i=r(71).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(24),i=r(30),o=r(117)(!1),u=r(145)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){var e=r(72),i=r(30),o=r(116).f;t.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),f=c.length,a=0,s=[];f>a;)o.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(71),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(150)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(150),u=/^[\-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(16),i=r(149),o=r(46);t.exports=function(t,n,r,u){var c=String(o(t)),f=c.length,a=void 0===r?" ":String(r),s=e(n);if(s<=f||""==a)return c;var l=s-f,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(this,t);return n&&n.v},set:function(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(48)(0),o=r(28),u=r(65),c=r(172),f=r(166),a=r(6),s=u.getWeak,l=Object.isExtensible,h=f.ufstore,v={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(a(t)){var n=s(t);return!0===n?h(this).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(this,t,n)}},y=t.exports=r(118)("WeakMap",p,d,f,!0,!0);7!=(new y).set((Object.freeze||Object)(v),7).get(v)&&(e=f.getConstructor(p),c(e.prototype,d),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=y.prototype,r=n[t];o(n,t,function(n,i){if(a(n)&&!l(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},,,,function(t,n){"use strict";function r(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}if(yiliaConfig&&yiliaConfig.toc_hide_index){document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}t.exports={init:r}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var r=/\/|index.html/g;return t.replace(r,"")===n.replace(r,"")}function o(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var o=t[r];i(n,o.getAttribute("href"))&&(0,h.default)(o,"active")}}function u(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}function c(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}function f(t,n,r,e,i){var o=u(t),f=c(t)-n;if(f-r<=i){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,d.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(r||f)+"px",a.style.left=o+"px",a.style.zIndex=e||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");f(t,document.body.scrollTop,-63,2,0),f(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}var l=r(156),h=e(l),v=r(157),p=(e(v),r(382)),d=e(p),y=r(128),g=e(y),b=r(190),m=e(b),x=r(129);(function(){g.default.versions.mobile&&window.screen.width<800&&(o(),s())})(),(0,x.addLoadEvent)(function(){m.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}if(r(381),r(391),r(198),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},,,function(t,n,r){r(210),t.exports=r(52).RegExp.escape},,,,function(t,n,r){var e=r(6),i=r(138),o=r(7)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){var e=r(202);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(2),i=r(50),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),t!=o)}},function(t,n,r){var e=r(72),i=r(125),o=r(116);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(72),i=r(30);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){"use strict";var e=r(208),i=r(121),o=r(26);t.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,f=!1;n>u;)(r[u]=arguments[u++])===c&&(f=!0);return function(){var e,o=this,u=arguments.length,a=0,s=0;if(!f&&!u)return i(t,r,o);if(e=r.slice(),f)for(;n>a;a++)e[a]===c&&(e[a]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},function(t,n,r){t.exports=r(3)},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){var e=r(1),i=r(209)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(160)}),r(78)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(130)}),r(78)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(53),i=r(1),o=r(17),u=r(169),c=r(137),f=r(16),a=r(131),s=r(154);i(i.S+i.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,b=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==b||v==Array&&c(b))for(n=f(h.length),r=new v(n);n>g;g++)a(r,g,y?d(h[g],g):h[g]);else for(l=b.call(h),r=new v;!(i=l.next()).done;g++)a(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(138)})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=r(67),u=r(16),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(131);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(135),o=r(45),u=r(75),c=r(16),f=[].slice;e(e.P+e.F*r(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return f.call(this,t,n);for(var i=u(t,r),a=u(n,r),s=c(a-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(26),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(74)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=Date.prototype.getTime,u=function(t){return t>9?t:"0"+t};e(e.P+e.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){
if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(204))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t===t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(163)})},function(t,n,r){"use strict";var e=r(6),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=r(66),o=r(24),u=Function.prototype,c="name",f=Object.isExtensible||function(){return!0};c in u||r(10)&&e(u,c,{configurable:!0,get:function(){try{var t=this,n=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,c)||!f(t)||e(t,c,i(5,n)),n}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(171),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:e})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(142);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(141);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1),i=r(142),o=Math.pow,u=o(2,-52),c=o(2,-23),f=o(2,127)*(2-c),a=o(2,-126),s=function(t){return t+1/u-1/u};e(e.S,"Math",{fround:function(t){var n,r,e=Math.abs(t),o=i(t);return e<a?o*s(e/a/c)*a*c:(n=(1+c/u)*e,r=n-(n-e),r>f||r!=r?o*(1/0):o*r)}})},function(t,n,r){var e=r(1),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,f=0;u<c;)r=i(arguments[u++]),f<r?(e=f/r,o=o*e*e+1,f=r):r>0?(e=r/f,o+=e*e):o+=r;return f===1/0?1/0:f*Math.sqrt(o)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(171)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(142)})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(45),u=r(136),c=r(50),f=r(4),a=r(71).f,s=r(31).f,l=r(11).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(70)(y))==v,b="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=b?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,f=n.slice(2),a=0,s=f.length;a<s;a++)if((u=f.charCodeAt(a))<48||u>i)return NaN;return parseInt(f,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?f(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(m(n)),r,p):m(n)};for(var x,w=r(10)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,x=w[S])&&!i(p,x)&&l(p,x,s(d,x));p.prototype=y,y.constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(168)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(168),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(178);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),i=r(67),o=r(159),u=r(149),c=1..toFixed,f=Math.floor,a=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l="0",h=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*a[r],a[r]=e%1e7,e=f(e/1e7)},v=function(t){for(var n=6,r=0;--n>=0;)r+=a[n],a[n]=f(r/t),r=r%t*1e7},p=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==a[t]){var r=String(a[t]);n=""===n?r:n+u.call(l,7-r.length)+r}return n},d=function(t,n,r){return 0===n?r:n%2==1?d(t,n-1,r*t):d(t*t,n/2,r)},y=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,f=o(this,s),a=i(t),g="",b=l;if(a<0||a>20)throw RangeError(s);if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(g="-",f=-f),f>1e-21)if(n=y(f*d(2,69,1))-69,r=n<0?f*d(2,-n,1):f/d(2,n,1),r*=4503599627370496,(n=52-n)>0){for(h(0,r),e=a;e>=7;)h(1e7,0),e-=7;for(h(d(10,e,1),0),e=n-1;e>=23;)v(1<<23),e-=23;v(1<<e),h(1,1),v(2),b=p()}else h(0,r),h(1<<-n,0),b=p()+u.call(l,a);return a>0?(c=b.length,b=g+(c<=a?"0."+u.call(l,a-c)+b:b.slice(0,c-a)+"."+b.slice(c-a))):b=g+b,b}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(159),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(70)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(173)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(30),i=r(31).f;r(49)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(49)("getOwnPropertyNames",function(){return r(174).f})},function(t,n,r){var e=r(17),i=r(32);r(49)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6);r(49)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(6);r(49)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(6);r(49)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(180)})},function(t,n,r){var e=r(17),i=r(72);r(49)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(144).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(178);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u=r(69),c=r(3),f=r(53),a=r(114),s=r(1),l=r(6),h=r(26),v=r(68),p=r(79),d=r(146),y=r(151).set,g=r(143)(),b="Promise",m=c.TypeError,x=c.process,w=c[b],x=c.process,S="process"==a(x),_=function(){},O=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(_)instanceof n}catch(t){}}(),E=function(t,n){return t===n||t===w&&n===o},P=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},j=function(t){return E(w,t)?new F(t):new i(t)},F=i=function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw m("Bad Promise constructor");n=t,r=e}),this.resolve=h(n),this.reject=h(r)},M=function(t){try{t()}catch(t){return{error:t}}},A=function(t,n){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,f=n.reject,a=n.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?r=e:(a&&a.enter(),r=u(e),a&&a.exit()),r===n.promise?f(m("Promise-chain cycle")):(o=P(r))?o.call(r,c,f):c(r)):f(e)}catch(t){f(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){y.call(c,function(){var n,r,e,i=t._v;if(T(t)&&(n=M(function(){S?x.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=S||T(t)?2:1),t._a=void 0,n)throw n.error})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!T(n.promise))return!1;return!0},I=function(t){y.call(c,function(){var n;S?x.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},k=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),A(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(n=P(t))?g(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(k,e,1))}catch(t){k.call(e,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){k.call({_w:r,_d:!1},t)}}};O||(w=function(t){v(this,w,b,"_h"),h(t),e.call(this);try{t(f(L,this,1),f(k,this,1))}catch(t){k.call(this,t)}},e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=r(73)(w.prototype,{then:function(t,n){var r=j(d(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),F=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(k,t,1)}),s(s.G+s.W+s.F*!O,{Promise:w}),r(81)(w,b),r(74)(b),o=r(52)[b],s(s.S+s.F*!O,b,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(u||!O),b,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var n=j(this);return(0,n.resolve)(t),n.promise}}),s(s.S+s.F*!(O&&r(123)(function(t){w.all(t).catch(_)})),b,{all:function(t){var n=this,r=j(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var c=o++,f=!1;r.push(void 0),u++,n.resolve(t).then(function(t){f||(f=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o&&i(o.error),r.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i&&e(i.error),r.promise}})},function(t,n,r){var e=r(1),i=r(26),o=r(2),u=(r(3).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(4)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),f=o(r);return u?u(e,n,f):c.call(e,n,f)}})},function(t,n,r){var e=r(1),i=r(70),o=r(26),u=r(2),c=r(6),f=r(4),a=r(163),s=(r(3).Reflect||{}).construct,l=f(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!f(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(a.apply(t,e))}var f=r.prototype,v=i(c(f)?f:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(50);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(139)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){function e(t,n){var r,c,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(r=i.f(t,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(s):void 0:f(c=o(t))?e(c,n,s):void 0}var i=r(31),o=r(32),u=r(24),c=r(1),f=r(6),a=r(2);c(c.S,"Reflect",{get:e})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(177)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(144);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){function e(t,n,r){var f,h,v=arguments.length<4?t:arguments[3],p=o.f(s(t),n);if(!p){if(l(h=u(t)))return e(h,n,r,v);p=a(0)}return c(p,"value")?!(!1===p.writable||!l(v)||(f=o.f(v,n)||a(0),f.value=r,i.f(v,n,f),0)):void 0!==p.set&&(p.set.call(v,r),!0)}var i=r(11),o=r(31),u=r(32),c=r(24),f=r(1),a=r(66),s=r(2),l=r(6);f(f.S,"Reflect",{set:e})},function(t,n,r){var e=r(3),i=r(136),o=r(11).f,u=r(71).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),o=void 0===n;return!r&&e&&t.constructor===a&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&o?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(t){t in a||o(a,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=a,a.prototype=l,r(28)(e,"RegExp",a)}r(74)("RegExp")},function(t,n,r){r(119)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(119)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("split",2,function(t,n,e){"use strict";var i=r(122),o=e,u=[].push,c="split",f="length",a="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[f]||2!="ab"[c](/(?:ab)*/)[f]||4!="."[c](/(.?)(.?)/)[f]||"."[c](/()()/)[f]>1||""[c](/.?/)[f]){var s=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,b=new RegExp(t.source,d+"g");for(s||(e=new RegExp("^"+b.source+"$(?!\\s)",d));(c=b.exec(r))&&!((l=c.index+c[0][f])>y&&(p.push(r.slice(y,c.index)),!s&&c[f]>1&&c[0].replace(e,function(){for(v=1;v<arguments[f]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[f]>1&&c.index<r[f]&&u.apply(p,c.slice(1)),h=c[0][f],y=l,p[f]>=g));)b[a]===c.index&&b[a]++;return y===r[f]?!h&&b.test("")||p.push(""):p.push(r.slice(y)),p[f]>g?p.slice(0,g):p}}else"0"[c](void 0,0)[f]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";r(184);var e=r(2),i=r(120),o=r(10),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="endsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{endsWith:function(t){var n=o(this,t,u),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),f=void 0===r?e:Math.min(i(r),e),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(29)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){var e=r(1),i=r(75),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(148),o="includes";e(e.P+e.F*r(134)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(147)(!0);r(140)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){var e=r(1),i=r(30),o=r(16);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(149)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="startsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(10),u=r(1),c=r(28),f=r(65).KEY,a=r(4),s=r(126),l=r(81),h=r(76),v=r(7),p=r(182),d=r(153),y=r(206),g=r(205),b=r(138),m=r(2),x=r(30),w=r(50),S=r(66),_=r(70),O=r(174),E=r(31),P=r(11),j=r(72),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(71).f=O.f=Z,r(116).f=X,r(125).f=tt,o&&!r(69)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(27)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(127),o=r(152),u=r(2),c=r(75),f=r(16),a=r(6),s=r(3).ArrayBuffer,l=r(146),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(f(i-e)),a=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,a.getUint8(e++));return o}}),r(74)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(127).ABV,{DataView:r(152).DataView})},function(t,n,r){r(55)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){"use strict";var e=r(166);r(118)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)("includes")},function(t,n,r){var e=r(1),i=r(143)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(165)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>16,f=i>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>16)+((o*f>>>0)+(a&r)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>>16,f=i>>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>>16)+((o*f>>>0)+(a&r)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(176)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),i=r(177),o=r(30),u=r(31),c=r(131);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r=o(t),e=u.f,f=i(r),a={},s=0;f.length>s;)c(a,n=f[s++],e(r,n));return a}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(176)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),i=r(3),o=r(52),u=r(143)(),c=r(7)("observable"),f=r(26),a=r(2),s=r(68),l=r(73),h=r(27),v=r(79),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},m=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){b(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=f(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){f(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,c,function(){return this}),e(e.G,{Observable:w}),r(74)("Observable")},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var f=c.get(n);return f.delete(r),!!f.size||c.delete(n)}})},function(t,n,r){var e=r(185),i=r(161),o=r(54),u=r(2),c=r(32),f=o.keys,a=o.key,s=function(t,n){var r=f(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){
return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(26),u=e.key,c=e.set;e.exp({metadata:function(t,n){return function(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(165)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(16),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(139)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(153)("asyncIterator")},function(t,n,r){r(153)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){for(var e=r(155),i=r(28),o=r(3),u=r(27),c=r(80),f=r(7),a=f("iterator"),s=f("toStringTag"),l=c.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],v=0;v<5;v++){var p,d=h[v],y=o[d],g=y&&y.prototype;if(g){g[a]||u(g,a,l),g[s]||u(g,s,d),c[d]=l;for(p in e)g[p]||i(g,p,e[p],!0)}}},function(t,n,r){var e=r(1),i=r(151);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(121),u=r(207),c=e.navigator,f=!!c&&/MSIE .\./.test(c.userAgent),a=function(t){return f?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*f,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){r(330),r(269),r(271),r(270),r(273),r(275),r(280),r(274),r(272),r(282),r(281),r(277),r(278),r(276),r(268),r(279),r(283),r(284),r(236),r(238),r(237),r(286),r(285),r(256),r(266),r(267),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(317),r(322),r(329),r(320),r(312),r(313),r(318),r(323),r(325),r(308),r(309),r(310),r(311),r(314),r(315),r(316),r(319),r(321),r(324),r(326),r(327),r(328),r(231),r(233),r(232),r(235),r(234),r(220),r(218),r(224),r(221),r(227),r(229),r(217),r(223),r(214),r(228),r(212),r(226),r(225),r(219),r(222),r(211),r(213),r(216),r(215),r(230),r(155),r(302),r(307),r(184),r(303),r(304),r(305),r(306),r(287),r(183),r(185),r(186),r(342),r(331),r(332),r(337),r(340),r(341),r(335),r(338),r(336),r(339),r(333),r(334),r(288),r(289),r(290),r(291),r(292),r(295),r(293),r(294),r(296),r(297),r(298),r(299),r(301),r(300),r(343),r(369),r(372),r(371),r(373),r(374),r(370),r(375),r(376),r(354),r(357),r(353),r(351),r(352),r(355),r(356),r(346),r(368),r(377),r(345),r(347),r(349),r(348),r(350),r(359),r(360),r(362),r(361),r(364),r(363),r(365),r(366),r(367),r(344),r(358),r(380),r(379),r(378),t.exports=r(52)},function(t,n){function r(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}t.exports=r},,,,,,,,,function(t,n,r){(function(n,r){!function(n){"use strict";function e(t,n,r,e){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),c=new p(e||[]);return u._invoke=s(t,r,c),u}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function u(){}function c(){}function f(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(r,e,o,u){var c=i(t[r],t,e);if("throw"!==c.type){var f=c.arg,a=f.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(a).then(function(t){f.value=t,o(f)},u)}u(c.arg)}function e(t,r){function e(){return new Promise(function(e,i){n(t,r,e,i)})}return o=o?o.then(e,e):e()}"object"==typeof r&&r.domain&&(n=r.domain.bind(n));var o;this._invoke=e}function s(t,n,r){var e=P;return function(o,u){if(e===F)throw new Error("Generator is already running");if(e===M){if("throw"===o)throw u;return y()}for(r.method=o,r.arg=u;;){var c=r.delegate;if(c){var f=l(c,r);if(f){if(f===A)continue;return f}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===P)throw e=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=F;var a=i(t,n,r);if("normal"===a.type){if(e=r.done?M:j,a.arg===A)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=M,r.method="throw",r.arg=a.arg)}}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=i(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,A;var o=e.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function h(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function v(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var n=t[w];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function n(){for(;++r<t.length;)if(m.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n};return e.next=e}}return{next:y}}function y(){return{value:g,done:!0}}var g,b=Object.prototype,m=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",S=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",O="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=n.regeneratorRuntime=O?t.exports:{},E.wrap=e;var P="suspendedStart",j="suspendedYield",F="executing",M="completed",A={},N={};N[w]=function(){return this};var T=Object.getPrototypeOf,I=T&&T(T(d([])));I&&I!==b&&m.call(I,w)&&(N=I);var k=c.prototype=o.prototype=Object.create(N);u.prototype=k.constructor=c,c.constructor=u,c[_]=u.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===u||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(k),t},E.awrap=function(t){return{__await:t}},f(a.prototype),a.prototype[S]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,i){var o=new a(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},f(k),k[_]="Generator",k.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(v),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,e){return o.type="throw",o.arg=t,r.next=n,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw t;for(var r=this,e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=m.call(i,"catchLoc"),c=m.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),A},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),A}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),A}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}(),r(158))}])</script><script src="/./main.0cf68a.js"></script><script>!function(){!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}("/slider.e37972.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">netfilter</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">iptables</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">WLAN</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">iw</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">mac80211_hwsim</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>